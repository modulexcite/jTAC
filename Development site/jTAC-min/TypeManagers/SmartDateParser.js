jTAC._internal.temp._TypeManagers_SmartDateParser={require:["TypeManagers.BaseDateTime"],constructor:function(a){},config:{cultureName:"",dateFormat:0,defaultYear:null,defaultMonth:null,moreDateSeps:null,cultureNeutral:true,monthAsDigits:true,monthAsTwoCharName:true,insertDateSeps:true,twoDigitYear:true,trimParts:false,skipPart:"",useUTC:false},configrules:{defaultYear:jTAC.checkAsIntOrNull,defaultMonth:jTAC.checkAsIntOrNull,moreDateSeps:jTAC.checkAsStrOrNull},parse:function(f){var h;var t=this.getDateFormat()<10;var g=this._culture().calendars.standard;var s=g["/"];var a=this.config;f=jTAC.trimStr(f);if(a.cultureNeutral&&(s!="-")&&(f.indexOf("-")==4)){h=Globalize.parseDate(f,"yyyy-MM-dd",this.getCultureName());if(h){h=new Date(h.valueOf());return a.useUTC?jTAC.TypeManagers.Base.prototype.asUTCDate(h):h}}if(t){if(a.moreDateSeps){var k=new RegExp("["+jTAC.escapeRE(a.moreDateSeps)+"]","ig");f=f.replace(k,s)}if(!a.trimParts&&(s!=" ")&&/[ ]/.test(f)){this._inputError("Spaces not allowed")}if(a.insertDateSeps&&(f.length>2)&&(f.indexOf(s)==-1)){f=this._insertDSeps(f,g)}}var e=0,n=0,v=0,p=this._dateOrder(g),l,b=0,q;if(t){l=f.split(s)}else{l=this._splitNonShort(f,g)}if(l.length>p.length){return null}for(q=0;(b<l.length)&&(q<p.length);q++){var o=l[b];switch(p[q]){case"d":v=parseInt(o,10);if(!isNaN(v)&&(v>0)){b++}else{this._inputError("Illegal days")}break;case"M":if((l.length==1)&&(p.length==3)){break}if(n==0){if(l[b]==""){n=0;b++;break}else{n=this._parseMonth(o,g)}if(isNaN(n)){n=0;b++}else{if((n<=12)&&(n>0)){b++}else{this._inputError("Illegal month")}}}break;case"y":if((l.length<3)&&(p.length==3)){break}if(e==0){if(o==""){e=0;break}else{e=parseInt(o,10)}var c="Illegal year";if(isNaN(e)){b++;this._inputError(c)}else{if(e<=9999){if(e<100){if(a.twoDigitYear){e+=(2000+e<g.twoDigitYearMax)?2000:1900}else{this._inputError(c)}}b++}else{this._inputError(c)}}}break}}if((n==0)&&(v==0)&&(e==0)){this._inputError("Missing digits")}if(n==0){n=this.getDefaultMonth()+1}if(v==0){v=1}if(e==0){e=this.getDefaultYear()}var j,u;if(a.useUTC){h=jTAC.TypeManagers.Base.prototype.asUTCDate(e,n-1,v);j=h.getUTCFullYear();u=h.getUTCMonth()}else{h=new Date(e,n-1,v,0,0,0,0);j=h.getFullYear();u=h.getMonth()}if((j!=e)||(u!=(n-1))){this._inputError("Day exceeds month range")}return h},_parseMonth:function(m,b){var d=this.config;var f=m.charAt(0);if((f>="0")&&(f<="9")){return d.monthAsDigits?parseInt(m,10):null}else{var c=this.getDateFormat();var l=this._internal.monthNames;if(l===undefined){l=(c<10)?b.months.namesAbbr:b.months.names;for(var g=0;g<l.length;g++){l[g]=l[g].toUpperCase()}this._internal.monthNames=l}if(l){var h=m.length;m=m.toUpperCase();for(var e=0;e<=1;e++){for(var g=0;g<l.length;g++){var a=l[g];if(!a){continue}if(h>=a.length){if(m.indexOf(a)==0){return g+1}}else{if(a.indexOf(m)==0){return g+1}}}if(!d.monthAsTwoCharName){break}var k=c==10;if((h>2)||k){h=2;m=m.substr(0,2);if(k){l=b.months.namesAbbr}}else{break}}return 0}else{return 0}}},_splitNonShort:function(g,e){var c,a,d;var b=jTAC.TypeManagers.BaseDateTime.prototype._getCulturePtn(20,null,e).replace("dddd","").replace("ddd","");a=this._removeLiterals(b);if(a){for(c=1;c<a.length;c++){if(/^[^'"]/.test(a[c])){g=g.replace(a[c]," ")}}}d=/([A-Za-z\u00C0-\u7FFF]+([\s'][A-Za-z\u00C0-\u7FFF]+)?)|(\d+)/ig;var f=[];for(c=0;c<3;c++){a=d.exec(g);if(a){f.push(a[0])}else{if(c==0){this._inputError("y/m/d parts not found")}else{break}}}return f},_dateOrder:function(f){if(!this._internal.order){var a=this.getDateFormat()<10?0:20;var c=jTAC.TypeManagers.BaseDateTime.prototype._getCulturePtn(a,null,f);c=c.replace("dddd","").replace("ddd","");var g=[];var b="Mdy";if(this.getSkipPart()){b=b.replace(this.getSkipPart(),"")}var h=false;for(var d=0;d<c.length;d++){var e=c.charAt(d);if((b.indexOf(e)>-1)&&(g.indexOf(e)==-1)&&!h){g.push(e)}else{if(e=="'"){h=!h}}}this._internal.order=g}return this._internal.order},_insertDSeps:function(n,b){var l=n.length,c=this.getDateFormat(),m=0,e=-1,k,j;if((c==1)||(c==2)){var k=0;var p=n.toUpperCase();for(var j=0;j<l;j++){var h=p.charAt(j);if(!((h>="0")&&(h<="9"))){if(e==-1){e=j}m++;k=1}else{if(k){break}}}}var d=this._dateOrder(b);var g=[];for(var j=0;j<d.length-1;j++){switch(d[j]){case"d":if((j==0)&&(e==1)){g[j]=1}else{g[j]=2}break;case"M":if(m>0){g[j]=m}else{if(l%2==0){g[j]=2}else{g[j]=1}}break;case"y":if(l>=5){if(l>=7){g[j]=4}else{g[j]=2}}break}}var o=b["/"];var a="";if(d.length==3){a=n.substring(0,g[0])+o+n.substring(g[0],g[0]+g[1]);if(l>4){a=a+o+n.substring(g[0]+g[1],l+1)}}else{if(g[0]<n.length){a=n.substring(0,g[0])+o+n.substring(g[0],l+1)}else{a=n}}return a},_removeLiterals:function(a){var b=this._internal.REPtnLit;if(!b){b=this._internal.REPtnLit=/(['"]([^'"]+)['"])(?:[^'"]+(['"]([^'"]+)['"])?)?/}return b.exec(a)},_culture:function(){var a=this._internal.svCulture;if(!a){a=this._internal.svCulture=Globalize.culture(this.getCultureName());if(!a){this._error("Could not load the culture. Ensure that that page has a script tag that loads the culture.")}}return a},getDefaultYear:function(){var b=this.config.defaultYear;if(b==null){var a=new Date();b=this.config.defaultYear=a.getFullYear()}return b},getDefaultMonth:function(){var a=this.config.defaultMonth;if(a==null){var b=new Date();a=this.config.defaultMonth=b.getMonth()}return a}};jTAC.define("TypeManagers.SmartDateParser",jTAC._internal.temp._TypeManagers_SmartDateParser);