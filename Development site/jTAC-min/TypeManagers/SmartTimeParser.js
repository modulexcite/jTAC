jTAC._internal.temp._TypeManagers_SmartTimeParser={constructor:function(a){},config:{cultureName:"",useUTC:false,timeFormat:0,defaultAM:true,noSecsEnforced:true,moreTimeSeps:null,insertTimeSeps:true,trimParts:false,fullAMPM:false,tod:false,maxHours:9999},configrules:{defaultAM:jTAC.checkAsBoolOrNull,moreTimeSeps:jTAC.checkAsStrOrNull},parse:function(n){var a;var b=this._culture().calendars.standard;var k=b[":"];var c=this.config;n=jTAC.trimStr(n);if(!n){return null}if(c.moreTimeSeps){var o=new RegExp("["+jTAC.escapeRE(c.moreTimeSeps)+"]","ig");n=n.replace(o,k)}if(c.insertTimeSeps&&(n.length>2)&&(n.indexOf(k)==-1)){n=this._insertTSeps(n,b)}var h,l=0,f=0,j=0,e=this._timeOrder(b),m=0,g=this._splitParts(n,b);if(g.length>e.length){this._inputError("Too many parts with digits")}for(h=0;(m<g.length)&&(h<e.length);h++){var d=g[m];var p=parseInt(d,10);if(isNaN(p)||(p<0)){this._inputError("Could not convert "+d+" to digits")}else{switch(e[h]){case"s":j=p;if(p<60){m++}else{this._inputError("Seconds exceed 59")}break;case"m":f=p;if(p<60){m++}else{this._inputError("Minutes exceed 59")}break;case"h":case"H":l=p;if(p<=this.getMaxHours()){m++}else{this._inputError("Hours exceed "+this.getMaxHours())}break}}}if(j&&c.noSecsEnforced&&((this.getTimeFormat()%10)==1)){this._inputError("Seconds cannot be assigned")}if(this.getTod()){l=this._correctHours(l,b,n)}return{hours:l,minutes:f,seconds:j,time:l*3600+f*60+j}},_correctHours:function(d,c,e){if(d>12){return d}var a=this._hasDesig("AM",c,e),f=this._hasDesig("PM",c,e);if(a&&f){f=false}else{if(!a&&!f){var b=this.config;if(b.defaultAM==null){if(this._timeOrder(c).indexOf("h")>-1){this._inputError("Cannot determine hours as AM or PM")}a=true}else{f=!b.defaultAM}}}if(f&&(d<12)){d=d+12}else{if(a&&(d==12)){d=0}}return d},_hasDesig:function(b,d,f){var c=d[b];if(!c){return false}var e=false;c=c[0].toUpperCase();var a=f.toUpperCase();if(c.length>0){e=a.indexOf(c)>-1;if(!e&&(c.length>1)&&!this.config.fullAMPM){if(d.AM[0].charAt(0)!=d.PM[0].charAt(0)){e=a.indexOf(c.charAt(0))>-1}}}return e},_splitParts:function(g,e){var d=this._internal.splitRE;if(!d){var c=e[":"],f=jTAC.escapeRE(c),b=f;if(this.config.trimParts&&(c!=" ")){b="\\s?"+f+"\\s?"}d=this._internal.splitRE=new RegExp("^[^\\d"+f+"]*(\\d+)("+b+"(\\d*)("+b+"(\\d*))?)?[^\\d"+f+"]*$")}var a=d.exec(g);if(a){return[a[1]||"0",a[3]||"0",a[5]||"0"]}this._inputError("Cannot extract the h/m/s parts")},_timeOrder:function(e){var f=this._internal.order;if(!f){var h=this.getTod()?0:10;var b=jTAC.TypeManagers.BaseDateTime.prototype._getCulturePtn(null,h,e);f=[];var a="Hhms";var g=false;for(var c=0;c<b.length;c++){var d=b.charAt(c);if((a.indexOf(d)>-1)&&(f.indexOf(d)==-1)&&!g){f.push(d)}else{if(d=="'"){g=!g}}}this._internal.order=f}return f},_insertTSeps:function(g,a){var f=/\d+/.exec(g);if(!f){return g}var b=f[0];var d=(b.length%2==0)?b.substr(0,2):b.substr(0,1);var c=b.substr(d.length,2);var j="";var i=b.length-(d.length+c.length);if(i>0){j=b.substr(d.length+c.length,i)}if(!c){c="0"}if(!j){j="0"}var e=d+a[":"]+c+a[":"]+j;return g.replace(b,e)},_culture:function(){var a=this._internal.svCulture;if(!a){a=this._internal.svCulture=Globalize.culture(this.getCultureName());if(!a){this._error("Could not load the culture. Ensure that that page has a script tag that loads the culture.")}}return a},getMaxHours:function(){var a=this.config.maxHours;if(this.getTod()&&a>23){return 23}return a}};jTAC.define("TypeManagers.SmartTimeParser",jTAC._internal.temp._TypeManagers_SmartTimeParser);