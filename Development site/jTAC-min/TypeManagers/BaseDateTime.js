if(!window.jTAC){throw new Error("window.jTAC not created.")}jTAC._internal.temp._TypeManagers_BaseDateTime={extend:"TypeManagers.BaseGlobalize","abstract":true,constructor:function(a){this.callParent([a])},config:{dateFormat:null,fallbackDateFormats:null,timeFormat:null,fallbackTimeFormats:null,timeOneEqualsSeconds:null,useUTC:false},configrules:{dateFormat:jTAC.checkAsIntOrNull,timeFormat:jTAC.checkAsIntOrNull,timeOneEqualsSeconds:jTAC.checkAsIntOrNull},nativeTypeName:function(){return this.getValueAsNumber()?"number":"object"},_stringToNative:function(b){var a=this._stringToDate(b);if(a==null){this._inputError("Cannot convert ["+b+"] to "+this.dataTypeName()+".")}if(this.getValueAsNumber()){return this._dateToNumber(a,this.getTimeOneEqualsSeconds())}return a},_stringToDate:function(c){var a=this._getPtns();var b=Globalize.parseDate(c,a,this.getCultureName());if(!b){return null}return this.getUseUTC()?this.asUTCDate(b):b},_nativeToString:function(c){if(c==null){return""}if(c instanceof Date){var a=this._getPtns()[0];var d=this.getTimeFormat();if(d%10==2){if(c.getSeconds()==0){a=a.replace(":ss","")}}var b=Globalize.format(c,a,this.getCultureName());var e=this.getDateFormat();if((e==2)||(e==7)){b=b.toUpperCase()}if((b.length==2)&&(b.charAt(0)=="0")){if(this._dtfi().patterns.d.indexOf("MM")==-1){b=b.charAt(1)}}return b}if(typeof(c)=="number"){if(this.getValueAsNumber()){return this._timeNumberToString(c,this.getTimeOneEqualsSeconds())}else{this._error("Must set the valueAsNumber property to true to pass in a number value.")}}this._error("value's type is not supported")},isValidChar:function(b){if(!this.callParent([b])){return false}var a=this._internal.validChars;if(a==null){a=this._internal.validChars=this._valChars()}return a.indexOf(b)>-1},_valChars:function(){var b=this._dtfi();var h=this._getPtns();var j=new Array();var a="1234567890";if(h){for(var g=0;g<h.length;g++){var f="(d{3,4})|(M{3,4})|(tt)|('[^']+')|(\\s)|(\\,)|("+jTAC.escapeRE(b["/"])+")|(\\:)";var l=new RegExp(f,"g");var e;while((e=l.exec(h[g]))!=null){var d=e[0];if(j.indexOf(d)==-1){var c=null;switch(d){case"ddd":c=b.days.namesAbbr;break;case"dddd":c=b.days.names;break;case"MMM":c=b.months.namesAbbr;break;case"MMMM":c=b.months.names;break;case"tt":if(b.AM){c=[b.AM[0],b.PM[0]]}break;case":":a+=b[":"];break;default:if(d.indexOf("'")==0){a+=d.replace("'","")}else{a+=d}break}if(c){var k=c.join("");a+=k.toLowerCase()+k.toUpperCase()}j.push(d)}}}}return a},_getPtns:function(){function e(j,i){var h=f.createPattern(j,i);if(h!=""){f._internal.patterns.push(h)}}var f=this;var g=this._internal.patterns;if(g==null){g=this._internal.patterns=new Array();var c=this._getAllDateFormats();var a=this._getAllTimeFormats();if(c){for(var d=0;d<c.length;d++){if(a){for(var b=0;b<a.length;b++){e(c[d],a[b])}}else{e(c[d],null)}}}if(!c&&a){for(var d=0;d<a.length;d++){e(null,a[d])}}}return g},_getAllDateFormats:function(){var c=this.getDateFormat();if(c==null){return null}var b=[c];var a=this.getFallbackDateFormats();if(a){b=b.concat(a)}return b},_getAllTimeFormats:function(){var c=this.getTimeFormat();if(c==null){return null}var b=(c%10==2)?[c,c-1]:[c];var a=this.getFallbackTimeFormats();if(a){b=b.concat(a)}return b},compare:function(b,a){if((this.config.dateFormat!=null)&&(this.config.timeFormat==null)){if(b instanceof Date){b=new Date(b.valueOf());b.setHours(0,0,0,0)}if(a instanceof Date){a=new Date(a.valueOf());a.setHours(0,0,0,0)}}else{if((this.config.dateFormat==null)&&(this.config.timeFormat!=null)){if(b instanceof Date){b=this._dateToNumber(b,1)}if(a instanceof Date){a=this._dateToNumber(a,1)}}}return this.callParent([b,a])},toValueNeutral:function(b){if(b==null){return null}try{this._pushContext();if((typeof(b)=="object")&&(b instanceof Date)){return this._reviewValue(b)}var a=Globalize.parseDate(b,"yyyy-MM-dd HH:mm:ss","");if(a==null){this._inputError("Required format: yyyy-MM-dd HH:mm:ss")}return a}finally{this._popContext()}},toStringNeutral:function(a){if(a==null){return""}return Globalize.format(a,"yyyy'-'MM'-'dd HH':'mm':'ss")},getValueAsNumber:function(){return false},_dtfi:function(){return this._culture().calendars.standard},createPattern:function(b,c){var i=b!=null;var d=c!=null;if(!i&&!d){return""}var a=this._dtfi();var g=this._getCulturePtn(b,c,a);if(i&&(b>=10)&&(b<20)){g=g.replace("MMMM","MMM")}if((b==10)||(b==20)||(b==15)||(b==25)){var f=/dddd[^A-Za-z]{1,}/;var h=/[^A-Z]{1,}dddd/;g=g.replace(f,"");g=g.replace(h,"")}else{if((b==11)||(b==21)||(b==16)||(b==26)){g=g.replace("dddd","ddd")}}if((b==1)||(b==2)||(b==6)||(b==7)){if(g.indexOf("MM")>-1){g=g.replace("MM","MMM")}else{g=g.replace("M","MMM")}}if(b%10>=5){if(b<10){var e=jTAC.escapeRE(a["/"]);g=g.replace(new RegExp(e+"yyyy"),"");g=g.replace(new RegExp("yyyy"+e),"")}else{var j="(([\\,\\s]+)|([\\,\\s]*'[^']+'\\s*))";g=g.replace(new RegExp(j+"yyyy"),"");g=g.replace(new RegExp("yyyy"+j),"")}}if(c>=10){g=g.replace("tt ","");g=g.replace(" tt","")}if(g.length==1){g+=g}return g},_getCulturePtn:function(a,e,d){if((a!=null)&&(e!=null)&&(a>=10)&&(a<100)&&(e<10)){return e!=1?d.patterns.F:d.patterns.f}var b="";if(a!=null){if(a<10){b=d.patterns.d}else{if(a==100){b="yyyy-MM-dd"}else{b=d.patterns.D}}}if(e!=null){if(b.length>0){b+=" "}switch(e){case 0:case 2:b+=d.patterns.T;break;case 1:b+=d.patterns.t;break;case 10:case 11:case 12:var c=(d.patterns.T.indexOf("HH")>-1)||(d.patterns.T.indexOf("hh")>-1);b+=c?"HH":"H";b+=d[":"];c=d.patterns.T.indexOf("mm")>-1;b+=c?"mm":"m";if(e!=11){b+=d[":"];c=d.patterns.T.indexOf("ss")>-1;b+=c?"ss":"s"}break;case 100:b+="HH:mm:ss";break}}return b},_timeNumberToString:function(i,b){function f(m,o,n){var l=o.toString();var h=m+m;if(n.indexOf(h)>-1){if(l.length<2){l="0"+l}n=n.replace(h,l)}else{n=n.replace(m,l)}return n}if(b>1){i=Math.floor(i*b)}var e=Math.floor(i/3600);var c=Math.floor((i%3600)/60);var k=Math.floor(i%60);var g=this._getPtns()[0];var d=e>11;if(g.indexOf("h")>-1){if(e==0){e=12}else{if(e>12){e=e-12}}}if(k==0){if(this.getTimeFormat()%10==2){g=g.replace(":ss","");g=g.replace(":s","")}}var j=g;var a=this._dtfi();j=j.replace(/\:/g,a[":"]);j=f("H",e,j);j=f("h",e,j);j=f("m",c,j);j=f("s",k,j);if(a.PM&&a.PM.length>0){j=j.replace("tt",d?a.PM[0]:a.AM[0])}return j},_dateToNumber:function(a,c){var b=a.getHours()*3600+a.getMinutes()*60+a.getSeconds();if(c>1){return b/c}return b},getFirstPattern:function(){return this._getPtns()[0]},getFallbackPattern:function(){var a=this._getPtns();if((a==null)||(a.length<2)){return""}return a[1]},assignDateFormats:function(a,c,b){this.setDateFormat(a);if(c&&(a<10)){c=false}var d=null;switch(a){case 0:if(b){d=[5];break}return;case 1:case 2:d=b?[0,6,5]:[0];break;case 10:if(b){d=[15]}break;case 11:d=b?[12,10,17,16,15]:[12,10];break;case 12:d=b?[11,10,17,16,15]:[11,10];break;case 20:d=b?[25,10,15]:[10];break;case 21:d=b?[22,20,27,26,25,12,11,10,17,16,15]:[22,20,12,11,10];break;case 22:d=b?[21,20,27,26,25,12,11,10,17,16,15]:[21,20,12,11,10];break}if(c){if(!d){d=[0]}else{d.push(0)}if(b){d.push(5)}}if(d){this.setFallbackDateFormats(d)}},assignTimeFormats:function(d,a,c){this.setTimeFormat(d);var b=null;switch(d){case 0:if(a&&c){b=[1,10,11]}else{if(a){b=[10]}else{if(c){b=[1]}}}break;case 1:if(a&&(c==false)){b=[0,10,11]}else{if(a){b=[11]}else{if(c==false){b=[0]}}}break;case 2:if(a&&c){b=[0,1,12,10,11]}else{if(a){b=[0,10,12]}else{if(c){b=[1,0]}}}break;case 10:if(c){b=[11]}break;case 11:if(c==false){b=[10]}break;case 12:b=[11,10];break}if(b){this.setFallbackTimeFormats(b)}},_clearInternals:function(){this._internal.patterns=null;this._internal.validChars=null},setDateFormat:function(a){this.config.dateFormat=jTAC.checkAsIntOrNull(a);this._clearInternals()},setFallbackDateFormats:function(a){if(typeof(a)=="number"){a=[a]}else{if((typeof(a)!="object")&&(a instanceof Array)){this._error("Illegal parameter. Must be an array of integers.")}}this.config.fallbackDateFormats=a;this._clearInternals()},setTimeFormat:function(a){this.config.timeFormat=jTAC.checkAsIntOrNull(a);this._clearInternals()},setFallbackTimeFormats:function(a){if(typeof(a)=="number"){a=[a]}else{if((typeof(a)!="object")&&(a instanceof Array)){this._error("Illegal parameter. Must be an array of integers.")}}this.config.fallbackTimeFormats=a;this._clearInternals()},setTimeOneEqualsSeconds:function(a){this.config.timeOneEqualsSeconds=jTAC.checkAsIntOrNull(a);this._clearInternals()}};jTAC.define("TypeManagers.BaseDateTime",jTAC._internal.temp._TypeManagers_BaseDateTime);