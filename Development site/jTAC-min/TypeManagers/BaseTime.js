jTAC._internal.temp._TypeManagers_BaseTime={extend:"TypeManagers.BaseDatesAndTimes","abstract":true,constructor:function(a){this.callParent([a])},config:{timeFormat:0,timeOneEqualsSeconds:1,valueAsNumber:false,parseStrict:false,parseTimeRequires:"h"},configrules:{timeFormat:{values:[0,1,2,10,11,12,100,101],clearCache:true},parseTimeRequires:{values:["h","m","s"],clearCache:true}},nativeTypeName:function(){return this.getValueAsNumber()?"number":"object"},storageTypeName:function(){return this.getValueAsNumber()?"float":"time"},supportsDates:function(){return false},supportsTimes:function(){return true},_stringToNative:function(b){var a=this._parse(b);if(a==null){this._inputError("Cannot convert ["+b+"] to "+this.dataTypeName()+".")}if(this.getValueAsNumber()){return this._fromNeutralToNumber(a)}if(a.h>23){this._inputError("Hours exceeds 23")}return this._fromNeutralToDate(a)},_nativeToString:function(b){if(b==null){return""}var a=(b instanceof Date)?this._fromDateToNeutral(b):this._fromNumberToNeutral(b);return this._format(a)},_parse:function(a){return this._parseTime(a)},_format:function(a){return this._formatTime(a)},_valChars:function(){var i="",k=new Array(),a="1234567890",j=this.dateTimeFormat("TimeSep"),g="(tt)|('[^']+')|(\\s)|(\\:)",o=new RegExp(g,"g"),e,d,c,l=this._timePattern();if(l){i+=l;a+=j}while((e=o.exec(i))!=null){d=e[0];if(k.indexOf(d)==-1){c=null;var b=null;switch(d){case"tt":var h=this.dateTimeFormat("AM")||"";var f=this.dateTimeFormat("PM")||"";c=[h,f];break;case":":break;default:a+=((d.indexOf("'")==0)?d.replace("'",""):d);break}if(b){c=this.dateTimeFormat(b)}if(c){var n=c.join("");a+=n.toLowerCase()+n.toUpperCase()}k.push(d)}}return a},_setNeutralFormat:function(a){this.setTimeFormat(100);this.setValueAsNumber(a.getValueAsNumber());this.setTimeOneEqualsSeconds(a.getTimeOneEqualsSeconds());this.setParseTimeRequires("s");this.setParseStrict(true)},_dateToNumber:function(a){return this._toTimeInSeconds(a,1)},_isTOD:function(){return true},setTimeFormat:function(a){this._defaultSetter("timeFormat",a);this._clearCache()},setTimeOneEqualsSeconds:function(a){this._defaultSetter("timeOneEqualsSeconds",a);this._clearCache()},_timePattern:function(){var a;switch(this.getTimeFormat()){case 0:case 2:a="LongTimePattern";break;case 1:a="ShortTimePattern";break;case 10:case 12:a="LongDurationPattern";break;case 11:a="ShortDurationPattern";break;case 100:return"HH:mm:ss";case 101:return"HH:mm";default:return""}return this.dateTimeFormat(a)},_parseTime:function(m){if(this.getParseStrict()){var o=this._strictTimePatternRE();var d=o.exec(m);if(!d){return null}}var j=[0,0,0],l=this.dateTimeFormat("TimeSep"),b=this._isTOD(),i=false,e=false;if(b){m=m.toLowerCase();var k=this.dateTimeFormat("AM")||"",f=this.dateTimeFormat("PM")||"";if(k){i=m.indexOf(k.toLowerCase())>-1}if(f){e=m.indexOf(f.toLowerCase())>-1}var h=e?f:k;m=m.replace(h.toLowerCase(),"");m=jTAC.trimStr(m)}var o=this._cache.parseTimeRE;if(!o){var n=jTAC.escapeRE(l);var g=this.getParseTimeRequires();var c="^(\\d{1,4})("+n+"(\\d{1,2}))"+((g=="h")?"?":"");if(this._timePattern().indexOf("s")>-1){c+="("+n+"(\\d{1,2}))"+((g!="s")?"?":"")}c+="$";this._cache.parseTimeRE=o=new RegExp(c)}var d=o.exec(m);if(d==null){return null}var a={h:parseInt(d[1],10),m:d[3]!=null?parseInt(d[3],10):0,s:d[5]!=null?parseInt(d[5],10):0};if(b){if(i||e){if(this.getParseStrict()){if((a.h>12)||(a.h==0)){this._inputError("Hours conflict with designator.")}}if(a.h<12&&e){a.h=a.h+12}else{if(i&&(a.h==12)){a.h=0}}}if(a.h>23){this._inputError("Hours exceeds 24.")}}if(a.m>59){this._inputError("Minutes exceeds 59.")}if(a.s>59){this._inputError("Seconds exceeds 59.")}return a},_strictTimePatternRE:function(){var e=this._cache.strictTimeRE;if(!e){var b=this._timePattern();b=jTAC.replaceAll(b,"'","");var f=this.getParseTimeRequires();if(f!="s"){b=b.replace(":ss","(:ss)?");if(f!="m"){if(b.indexOf("mm")>-1){b=b.replace(":mm","(:mm)?")}else{b=b.replace(":m","(:m)?")}}}b=b.replace(/h{1,4}/i,"(\\d{1,4})");b=b.replace(/m?m/,"(\\d{1,2})");b=b.replace(/s?s/,"(\\d{1,2})");b=jTAC.replaceAll(b,":",jTAC.escapeRE(this.dateTimeFormat("TimeSep")),true);b=b.replace(" ","\\s?");if(b.indexOf("t")>-1){var a=this.dateTimeFormat("AM");var d=this.dateTimeFormat("PM");var c=a?"((?:"+jTAC.escapeRE(a)+")|(?:"+jTAC.escapeRE(d)+"))":"";b=b.replace(/t?t/,c)}b="^"+b+"$";this._cache.strictTimeRE=e=new RegExp(b,"i")}return e},_formatTime:function(d,b){if(!b){b=this._timePattern()}if(!d.s&&(this.getTimeFormat()%10==2)){b=b.replace(":ss","").replace(":s","")}var c=b;c=jTAC.replaceAll(c,":",this.dateTimeFormat("TimeSep"),true);if(b.indexOf("h")>-1){var a=d.h%12;if(a==0){a=12}c=this._replacePart("h",a,c)}else{c=this._replacePart("H",d.h,c)}c=this._replacePart("m",d.m,c);c=this._replacePart("s",d.s,c);c=c.replace("tt",this.dateTimeFormat(d.h>11?"PM":"AM"));return c},_fromNeutralToNumber:function(c){var a=c.h*3600+c.m*60+c.s;var b=this.getTimeOneEqualsSeconds();return(b>1)?a/b:a},_fromNumberToNeutral:function(b){var a=this.getTimeOneEqualsSeconds();if(a>1){b=Math.floor(b*a)}return{y:0,M:1,d:1,h:Math.floor(b/3600),m:Math.floor((b%3600)/60),s:Math.floor(b%60)}},_toTimeInSeconds:function(a,c){var b=this.getUseUTC()?a.getUTCHours()*3600+a.getUTCMinutes()*60+a.getUTCSeconds():a.getHours()*3600+a.getMinutes()*60+a.getSeconds();if(c>1){return b/c}return b}};jTAC.define("TypeManagers.BaseTime",jTAC._internal.temp._TypeManagers_BaseTime);