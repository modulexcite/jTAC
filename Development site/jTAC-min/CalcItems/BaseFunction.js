jTAC._internal.temp._CalcItems_BaseFunction={extend:"CalcItems.Base","abstract":true,require:["CalcItems.Number","CalcItems.NaN"],constructor:function(a){this.callParent([a])},config:{parms:[],valueWhenInvalid:"CalcItems.NaN",valueWhenNull:"CalcItems.Number"},configrules:{valueWhenInvalid:jTAC.checkAsCalcItem,valueWhenNull:jTAC.checkAsCalcItem},evaluate:function(){try{this._pushContext();this._cleanupParms();var f=this._numParms();var e=[];var d=this.getParms();for(var b=0;b<d.length;b++){if(f&&b>f){break}var h=d[b];var g=null;if(h.canEvaluate()){g=h.evaluate();if(isNaN(g)){var a=this.getValueWhenInvalid();if(!a||!a.canEvaluate()){return NaN}g=a.evaluate();if(isNaN(g)||(g==null)||a.getStopProcessing()){return g}}else{if(g==null){var c=this.getValueWhenNull();if(!c||!c.canEvaluate()){return null}g=c.evaluate();if(isNaN(g)||(g==null)||c.getStopProcessing()){return g}}}e.push(g)}}if(f&&e.length<f){return NaN}if(f==1){e=e[0]}return this._func(e)}finally{this._popContext()}},_func:function(a){this._AM()},_numParms:function(){return 0},_cleanupParms:function(){var b=this.getParms();for(var a=0;a<b.length;a++){b[a]=this._cleanupCalcItemInput(b[a])}},addParm:function(a){this._cleanupParms();a=this._cleanupCalcItemInput(a);this.getParms().push(a)},collectConnections:function(c){this._cleanupParms();var b=this.getParms();for(var a=0;a<b.length;a++){b[a].collectConnections(c)}},parse:function(c,d){try{this._pushContext();this._checkParser(d);var a=d.asExact(c,this._getParseName()+"(",false,false,null);if(!a){var b=this._getParseName2();if(b){a=d.asExact(c,b+"(",false,false,null)}if(!a){return null}}c=a.rem;a=this._getParseParms(c,d);return{obj:this._convertParseParms(a.parms),rem:a.rem}}finally{this._popContext()}},_getParseName:function(){return this.$className},_getParseName2:function(){return null},_numParserParms:function(){return this._numParms()},_getParseParms:function(e,f){var c,b=[],d=this._numParserParms(),a=0;while(true){c=this.calcexpr(e,f);if(!c){f.err(e,"Missing parameter",this)}e=c.rem;b.push(c.ci);c=f.asParmDelim(e,false);if(!c||c.delim=="}"){f.err(e,"parameter missing terminating delimiter",this)}e=c.rem;if(c.delim==")"){return{parms:b,rem:e}}a++;if(d&&(a>=d)){f.err(e,"too many calc expressions",this)}}},_convertParseParms:function(b){var a=jTAC.create(this.$fullClassName);a.setParms(b);return a},setParms:function(a){if(a instanceof Array){this.config.parms=a}else{this.config.parms=[this._cleanupCalcItemInput(a)]}}};jTAC.define("CalcItems.BaseFunction",jTAC._internal.temp._CalcItems_BaseFunction);