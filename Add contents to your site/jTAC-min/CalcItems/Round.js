jTAC._internal.temp._CalcItems_Round={extend:"CalcItems.BaseFunction",require:"TypeManagers.Base",constructor:function(a){this.callParent([a])},config:{roundMode:2,maxDecimalPlaces:3},_func:function(a){try{return jTAC.TypeManagers.Base.prototype.round(a,this.getRoundMode(),this.getMaxDecimalPlaces())}catch(b){return NaN}},_numParms:function(){return 1},parse:function(d,e){this._checkParser(e);var b=e.asExact(d,"Round(");if(b){d=b.rem;return this._parseRound(d,e)}var a,c=0;b=e.asExact(d,"Math.round(");if(b){c=0}else{b=e.asExact(d,"Math.floor(");if(b){c=2}else{b=e.asExact(d,"Math.ceil(");if(b){c=3}else{return null}}}d=b.rem;b=this._getParseParms(d,e);a=jTAC.create("CalcItems.Round");a.setParms(b.parms);a.setRoundMode(c);a.setMaxDecimalPlaces(0);return{obj:a,rem:b.rem}},_parseRound:function(g,c){var i,b=3,e=0,a=this.calcexpr(g,c);if(!a){c.err(g,"Must be an expression.",this)}g=a.rem;i=a.ci;a=c.asParmDelim(g,false);if(!a||a.delim=="}"){c.err(g,"parameter missing terminating delimiter",this)}g=a.rem;if(a.delim==","){var h=/^\s*([01234])/;var d=h.exec(g);if(!d){a=c.asId(g);if(a){g=a.rem;switch(a.id){case"point5":case"round":e=0;break;case"currency":e=1;break;case"truncate":case"floor":e=2;break;case"ceiling":case"ceil":e=3;break;case"nextwhole":e=4;break;default:c.err(g,"Valid values: point5, truncate, currency, ceiling, nextwhole",this)}}else{a=c.asNull(g,true)}g=a.rem}else{e=parseInt(d[1],10);g=g.substr(d[0].length)}a=c.asParmDelim(g,false);if(!a||a.delim=="}"){c.err(g,"parameter missing terminating delimiter",this)}g=a.rem;if(a.delim==","){a=c.asInt(g,false);if(a){b=a.number}else{a=c.asNull(g,true)}g=a.rem;a=c.asParmDelim(g,false);if(!a||a.delim!=")"){c.err(g,"parameter missing terminating delimiter",this)}g=a.rem}}var f=jTAC.create("CalcItems.Round");f.setParms(i);f.setRoundMode(e);f.setMaxDecimalPlaces(b);return{obj:f,rem:g}}};jTAC.define("CalcItems.Round",jTAC._internal.temp._CalcItems_Round);if(jTAC.parser){jTAC.parser.register("CalcItems.Round")};