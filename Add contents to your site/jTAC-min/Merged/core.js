var jTAC=(function(){var definitions={};var aliases={};function define(fullClassName,members,replace){function member(name,typeName,missing,del){var val=members[name]||missing;if(val!=null){if(typeof val!=typeName){me.error(name+" parameter must be a "+typeName+".")}}delete members[name];return val}var me=jTAC;try{pushContext("jTAC.define('"+fullClassName+"')");if(!members||(typeof members!="object")){me.error("Members parameter must be an object.")}var nspath=fullClassName.split(".");var className=nspath.pop();var definition=definitions[fullClassName];if(definition&&!replace){me.error("["+fullClassName+"] is already defined.")}var parentName=member("extend","string",null);if(parentName){me.require(parentName)}var parentClass=parentName?me.getClass(parentName,true):null;var ctor=member("constructor","function",null);if(ctor&&ctor.toString().indexOf("function Object()")>-1){ctor=null}if(!ctor){ctor=function(propertyVals){if(parentClass){this.$parentClass.prototype.$ctor(propertyVals)}}}var newconfig=member("config","object");var newconfigrules=member("configrules","object");var abs=member("abstract","boolean",false);var require=members.require||null;if(require){if((typeof require!="string")&&!(require instanceof Array)){me.error("require property must be a string or array of strings")}jTAC.require(require)}delete members.require;var config=function(){};if(parentClass){config.prototype=new parentClass.prototype.config()}if(newconfig){me.extend(newconfig,config.prototype)}var configrules=function(){};if(parentClass){configrules.prototype=new parentClass.prototype.configrules()}if(newconfigrules){me.extend(newconfigrules,configrules.prototype)}_setupConfigRules(config.prototype,configrules);var newClass=function(){this.$className=className;this.$parentName=parentName||"";this.$parentClass=parentClass;this.$fullClassName=fullClassName;this.$require=require;this.$abstract=abs;this.$uniqueid=jTAC._internal.uniqueid++;this.config={};this._internal={};this._cache={};me.extend(config.prototype,this.config,true);this.configrules={};me.extend(configrules.prototype,this.configrules,true);if(config){this._defineProperties.call(this,config)}};_buildUserPath.call(me,nspath,className,newClass);if(parentClass){newClass.prototype=new parentClass()}else{me.extend(jTACClassBase,newClass.prototype)}me.extend(members,newClass.prototype);if(newconfig){newClass.prototype._autoGetSet.call(newClass,newconfig,configrules)}newClass.prototype.config=config;newClass.prototype.configrules=configrules;newClass.prototype.$ctor=ctor;_registerNewMethodNames(newClass,parentClass,fullClassName);definitions[fullClassName]={ctor:newClass,inst:new newClass()}}finally{popContext()}}function isDefined(fullClassName){return jTAC.getClass(fullClassName,false)!=null}function addMembers(fullClassName,members){try{pushContext("jTAC.addMembers('"+fullClassName+"')");var me=jTAC;if(typeof members=="object"){var def=jTAC.getDefinition(fullClassName);if(!def){me.error("className ["+fullClassName+"] not defined. Requires a case sensitive match.")}var proto=def.ctor.prototype;var config=null;for(var name in members){switch(name){case"config":config=members[name];me.extend(config,proto.config.prototype);break;case"configrule":me.extend(members[name],proto.configrules.prototype);break;default:proto[name]=members[name];if(typeof proto[name]=="function"){proto[name].$owner=def.inst.$parentClass;proto[name].$name=name;proto[name].$fullClassName=def.inst.$fullClassName}break}}if(config){_setupConfigRules(config,proto.configrules);proto._autoGetSet.call(def.ctor,config,proto.configrules)}}else{me.error("Illegal param")}}finally{popContext()}}function createByClassName(fullClassName,propertyVals,optional){try{pushContext("jTAC.createByClassName('"+fullClassName+"')");var me=jTAC;var classFnc=me.getClass(fullClassName,false);if(classFnc==null){if(optional){return null}_scriptFileMissing(fullClassName)}var obj=new classFnc();if(obj.$abstract){me.error("Cannot create ["+fullClassName+"]. It is marked abstract.")}obj.init.call(obj,propertyVals);return obj}finally{popContext()}}function _scriptFileMissing(fullClassName){jTAC.error("className ["+fullClassName+"] not defined. Check that the script file is loaded. The name is case sensitive.")}function require(fullClassNames){if(typeof(fullClassNames)=="string"){fullClassNames=[fullClassNames]}for(var i=0;i<fullClassNames.length;i++){var r=jTAC.getClass(fullClassNames[i],false);if(!r){_scriptFileMissing(fullClassNames[i])}}}function defineAlias(aliasName,fullClassName,propertyVals,replace,optional){var me=jTAC;if(aliases[aliasName]&&!replace){me.error("alias named ["+aliasName+"] is already defined.")}var cl=me.getClass(fullClassName,!optional);if(cl){if(propertyVals===undefined){propertyVals=null}aliases[aliasName]={className:fullClassName,propertyVals:propertyVals}}}function create(name,propertyVals,optional){try{pushContext("jTAC.create('"+name+"')");var me=jTAC;if(!name){if(!propertyVals){me.error("Must supply parameters")}name=propertyVals.jtacClass;if(!name){me.error("Must either pass a class name or assign the jtacClass property to a class name in the propertyVals object.")}}var alias=aliases[name];if(alias){var obj=me.create(alias.className,alias.propertyVals);if(propertyVals){if(typeof propertyVals=="function"){propertyVals.call(obj,obj,alias.className,name)}else{obj.setProperties.call(obj,propertyVals)}}return obj}return me.createByClassName(name,propertyVals,optional)}finally{popContext()}}function _buildUserPath(namespaces,className,ctor){var me=jTAC;var current=me;var nspath=namespaces;if(typeof namespaces=="string"){nspath=namespaces?namespaces.split("."):[]}for(var i=0;i<nspath.length;i++){var name=nspath[i];if(name=="jTAC"){continue}if(!name){me.error("Empty namespace is illegal")}var child=current[name];if(!child){current[name]=child={};child._parent=current}current=child}current[className]=ctor}function getClass(fullClassName,throwError){var def=getDefinition(fullClassName);if(!def){if(throwError){_scriptFileMissing(fullClassName)}return null}return def.ctor}function getDefinition(fullClassName){var me=jTAC;fullClassName=fullClassName.replace("jTAC.","");return definitions[fullClassName]}function inheritsFrom(fullClassName,anotherClassName){var def=getDefinition(fullClassName);if(!def){_scriptFileMissing(fullClassName)}return def.inst.instanceOf(anotherClassName)}function _setupConfigRules(config,configrules){for(var name in config){var obj=configrules.prototype[name];var fnc=null;if(obj){if(typeof obj=="function"){configrules.prototype[name]={valFnc:obj};continue}else{if(obj instanceof Array){configrules.prototype[name]={values:obj};continue}else{fnc=obj.valFnc}}}if(fnc){continue}if(obj&&obj.values){continue}var val=config[name];switch(typeof val){case"boolean":fnc=jTAC.checkAsBool;break;case"number":fnc=jTAC.checkAsInt;break;case"string":fnc=jTAC.checkAsStr;break;case"object":if(val instanceof RegExp){fnc=jTAC.checkAsRegExp}else{if(val instanceof Array){fnc=jTAC.checkAsArray}}break}if(fnc){if(!obj){configrules.prototype[name]=obj={}}obj.valFnc=fnc}}}function _registerNewMethodNames(newClass,parentClass,fullClassName){var skipnames=["config","$parentClass"];var proto=newClass.prototype;for(var name in proto){if(skipnames.indexOf(name)>-1){continue}if(proto.hasOwnProperty(name)){var val=proto[name];if(typeof val=="function"){val.$owner=parentClass;val.$name=name;val.$fullClassName=fullClassName}}}}function silentWarnings(bool){if(!arguments.length){return _silentWarnings}return _silentWarnings=bool}var _silentWarnings=false;var _errorActionStack=[];function pushContext(action,value){if(!action){var c=pushContext.caller;while(!action&&c&&c.$name){action=c.$name;if(["_pushContext"].indexOf(action)>-1){action="";c=c.caller}if(action){action=c.$fullClassName+"."+action+"()"}}}if(action&&(value!=null)){action+=" ["+value.toString()+"]"}_errorActionStack.push(action)}function popContext(){return _errorActionStack.pop()}function actionStack(){return _errorActionStack.join("> ")}function _logAndThrow(msg,inst,action,noThrow,caller,consolemode){if(window.console){if(inst&&inst.$className){msg="["+inst.$fullClassName+"]  Message: "+msg}var as=actionStack();while(!action&&caller&&caller.$name){action=caller.$name;if(["_error","_inputError","_AM","_DM","err"].indexOf(action)>-1){action="";caller=caller.caller}if(action){action=caller.$fullClassName+"."+action+"()"}}if(as){action=as+(action?"> "+action:"")}if(action){msg+="   Context: "+action+""}if(!consolemode||(consolemode=="error")){console.error(msg)}else{eval("console."+consolemode+"(msg);")}if(console.trace){console.trace()}}if(!noThrow){throw new Error(msg)}}var staticMethods={error:function(msg,inst,action,noThrow){_logAndThrow(msg,inst,action,noThrow,this.error.caller,"error")},inputError:function(msg,inst,action,noThrow){_logAndThrow(msg,inst,action,noThrow,this.inputError.caller,"log")},warn:function(msg,inst,action){_logAndThrow(msg,inst,action,true,this.error.caller,"warn")},trimStr:function(value){return(value+"").replace(/^\s+|\s+$/g,"")},escapeRE:function(text){return text.replace(/[-[\]{}()*+?.,\\^$|#\s:]/g,"\\$&")},delimitedRE:function(text,delim){if(delim==null){delim="\\s"}return new RegExp("(^|"+delim+")"+jTAC.escapeRE(text)+"("+delim+"|$)")},replaceAll:function(text,find,replace,escape){if(escape){find=jTAC.escapeRE(find)}var re=new RegExp(find,"ig");return text.replace(re,replace)},contains:function(text,find,escape){if(escape){find=jTAC.escapeRE(find)}var re=new RegExp(find,"ig");return re.test(text)},htmlEncode:function(text){return String(text).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},checkAsInt:function(value,defaultval){if(value==null){if(defaultval===undefined){jTAC.error("Null is not allowed. Must be an integer.")}else{return defaultval}}if(typeof(value)=="string"){value=parseFloat(value)}if((typeof(value)!="number")||isNaN(value)||(Math.floor(value)!=value)){jTAC.error("Illegal value. Must be an integer.")}return value},checkAsIntOrNull:function(value){if((value==null)||(value==="")){return null}return jTAC.checkAsInt(value)},checkAsNumber:function(value,defaultval){if(value==null){if(defaultval===undefined){jTAC.error("Null is not allowed. Must be an integer.")}else{return defaultval}}if(typeof(value)=="string"){value=parseFloat(value)}if((typeof(value)!="number")||isNaN(value)){jTAC.error("Illegal value. Must be a number.")}return value},checkAsNumberOrNull:function(value){if((value==null)||(value==="")){return null}return jTAC.checkAsNumber(value)},checkAsBool:function(value,defaultval){if(value==null){if(defaultval===undefined){jTAC.error("Null is not allowed. Must be an boolean.")}else{return defaultval}}switch(typeof(value)){case"boolean":break;case"string":if(value.toLowerCase()=="true"){value=true}else{if(value.toLowerCase()=="false"){value=false}else{value=undefined}}break;case"number":if(value==1){value=true}else{if(value==0){value=false}else{value=undefined}}break;default:value=undefined;break}if(value===undefined){jTAC.error("Illegal value. Must be an boolean.")}return value},checkAsBoolOrNull:function(value){if((value==null)||(value==="")){return null}return jTAC.checkAsBool(value)},checkAsStr:function(value,defaultval){if(value==null){if(defaultval===undefined){jTAC.error("Null is not allowed. Must be a string.")}else{return defaultval}}if(typeof(value)=="number"){value=value.toString()}else{if(typeof(value)!="string"){jTAC.error("Illegal value. Must be a string.")}}return value},checkAsStrOrNull:function(value){return jTAC.checkAsStr(value,null)},checkAsClass:function(val,existingObject,classCtor){if(((val==null)||(val==""))&&(existingObject!==undefined)){return existingObject||null}try{jTAC._internal.pushContext("jTAC.checkAsClass");if(val&&(typeof val=="object")&&!val.$className){if(val.jtacClass){val=jTAC.create(null,val)}else{if(existingObject){existingObject.setProperties(val);return existingObject}}}else{if(typeof(val)=="string"){val=jTAC.create(val,null,true)}}if(val instanceof classCtor){return val}var name=val?val.$fullClassName:(existingObject?existingObject.$fullClassName:"n/a");jTAC.error("Property does not support the class ["+name+"].")}finally{jTAC._internal.popContext()}},checkAsRegExp:function(val){if((val instanceof RegExp)||(val==null)){return val}if(typeof val=="string"){try{return new RegExp(val)}catch(e){jTAC.error("Invalid regular expression pattern. Error: "+e.message)}}jTAC.error("Invalid type in 'val' parameter.")},checkAsArray:function(value,defaultval){if(value==null){if(defaultval===undefined){jTAC.error("Null is not allowed. Must be an integer.")}else{return defaultval}}if(value instanceof Array){return value}jTAC.error("Illegal value. Must be an array.")},checkAsFunction:function(value,defaultval){if(value==null){if(defaultval===undefined){jTAC.error("Null is not allowed. Must be a function.")}else{return defaultval}}if(typeof(value)=="string"){value=window[value];if(!value){jTAC.error("Function ["+value+"] not defined on the window object.")}}if((typeof(value)!="function")){jTAC.error("Illegal value. Must be a function.")}return value},checkAsFunctionOrNull:function(value,defaultval){return jTAC.checkAsFunction(value,null)},extend:function(src,dest,deep){if((typeof src=="object")&&(typeof dest=="object")){for(var name in src){dest[name]=deep?jTAC.clone(src[name]):src[name]}}else{jTAC.error("Illegal param")}},clone:function(item){if(item==null){return null}if(typeof item=="object"){if(item instanceof Array){var a=[];for(var i=0;i<item.length;i++){a[i]=jTAC.clone(item[i])}return a}if(item instanceof Date){return new Date(item.getTime())}if(item.constructor===Object){var newObj={};for(name in item){newObj[name]=jTAC.clone(item[name])}return newObj}}return item}};var publics={define:define,defineAlias:defineAlias,addMembers:addMembers,isDefined:isDefined,createByClassName:createByClassName,create:create,require:require,getClass:getClass,getDefinition:getDefinition,silentWarnings:silentWarnings};staticMethods.extend(staticMethods,publics);publics._internal={definitions:definitions,aliases:aliases,pushContext:pushContext,popContext:popContext,actionStack:actionStack,uniqueid:0,temp:{}};return publics})();var jTACClassBase={$className:null,getName:function(){return $className},$parentName:null,$parentClass:null,$fullClassName:null,$abstract:false,$require:null,config:null,_internal:null,_cache:null,init:function(a){this._reviewDefaults.call(this);if(this.$ctor){this.$ctor.call(this,a)}if(a){if(typeof a=="function"){a.call(this,this,this.$className)}else{this.setProperties.call(this,a)}}},implement:function(a){jTAC.extend(a,this.prototype)},callParent:function(d){if(d&&(typeof d!="object")){this._error("Arguments must be enclosed in an array.")}if(this.$className===undefined){this._error("Only supports classes defined by jTAC.define().")}var c=this.callParent.caller;if(!c){this._error("No caller")}var a=c.$name;if(!a){this._error("Not registered correctly.")}if(!c.$owner){this._error("No parent class defined.")}var b=c.$owner.prototype[a];if(!b){this._error("Parent does not define the method ["+a+"].")}return b.apply(this,d||[])},instanceOf:function(a){var b=this;do{if(b.$fullClassName==a){return true}b=b.$parentClass}while(b!=null);return false},getProperty:function(b){try{this._pushContext(this.$fullClassName+".getProperty('"+b+"')");var c=this._propNameToUpper(b);var a=this["get"+c];if(a){return a.call(this)}return undefined}finally{this._popContext()}},setProperty:function(a,b){try{this._pushContext(this.$fullClassName+".setProperty('"+a+"')");var c=this._propNameToUpper(a);var d=this["set"+c];if(d){d.call(this,b);return true}return false}finally{this._popContext()}},setProperties:function(b){for(var a in b){if(a=="jtacClass"){continue}this.setProperty(a,b[a])}},_propNameToUpper:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},_autoGetSet:function(b,c){function e(k){var j=c.prototype[k]||null;var h=!j||(j.autoGet!=false);var g=!j||(j.autoSet!=false);var i=proto._propNameToUpper(k);var f=proto["get"+i];var l=proto["set"+i];if(!f&&h){proto["get"+i]=function(){return this.config[k]}}if(!l&&g){proto["set"+i]=function(m){this._defaultSetter.call(this,k,m)}}}proto=this.prototype;for(var a in b){var d=b[a];if(d===undefined){continue}e(a)}},_defaultSetter:function(b,d){var c=this.configrules[b];if(c){var e=(typeof c=="function")?c:e=c.valFnc;if(e){d=e.call(this,d)}else{var a=c instanceof Array?c:c.values;if(a){if(a.indexOf(d)==-1){jTAC.error("Requires one of these values: "+a.join(", "))}}}if(c.clearCache){this._clearCache()}}this.config[b]=d},_defineProperties:function(b){for(var a in b.prototype){var c=b.prototype[a];if(c===undefined){continue}this._defineProperty(a)}},_defineProperty:function(b){if(Object.defineProperty){var d=this;var c=d._propNameToUpper(b);var a=d["get"+c];if(a&&(typeof a!="function")){return}var e=d["set"+c];if(e&&(typeof e!="function")){return}Object.defineProperty(d,b,{get:function(){if(a){try{d._pushContext(d.$fullClassName+"."+a.$name);return a.call(d)}finally{d._popContext()}}},set:function(f){if(e){try{d._pushContext(d.$fullClassName+"."+e.$name);e.call(d,f)}finally{d._popContext()}}}})}},_reviewDefaults:function(){var c=this;for(var a in c.config){var d=c.config[a];if(d==null){continue}var b=c._propNameToUpper(a);var e=c["set"+b];if(!e||(typeof e!="function")){continue}e.call(c,d)}},_clearCache:function(){this._cache={};var a=this._internal.children;if(a){for(var b in a){a[b]._clearCache()}}},_registerChild:function(b){var a=this._internal.children;if(!a){a=this._internal.children=[]}a.push(b)},_AM:function(){jTAC.error("Not supported. Abstract method.",this)},_DM:function(){jTAC.error("Not supported method.",this)},_pushContext:function(b,a){jTAC._internal.pushContext(b,a)},_popContext:function(){return jTAC._internal.popContext()},_error:function(b,a){jTAC.error(b,this,a)},_inputError:function(b,a){jTAC.inputError(b,this,a)},_warn:function(c,b,a){jTAC.warn(c,b,a)}};jTAC.translations={register:function(c,a){var b=jTAC.translations[c];if(b==null){jTAC.translations[c]=b={}}jTAC.extend(a,b,true);jTAC.translations.setLanguage(c)},setLanguage:function(a){if(jTAC.translations[a]==null){jTAC.error("Requested the language for ["+a+"]. It has not be registered with jTAC.translations.")}jTAC.translations.current=jTAC.translations[a]},lookup:function(d,f,g){if(!d){return f}var c=jTAC.translations;var b=c.current;if(b==null){return f}if(g&&(b==c[""])){return f}var e=b[d];if((e==null)&&!g){var a=c[""];if(a&&(a!==b)){e=tn[d]}}return e!=null?e:f}};var jTAC_Temp;if(!window.jTAC){throw new Error("window.jTAC not created.")}jTAC._internal.temp._Connections_Base={"abstract":true,constructor:function(a){},config:{defaultLabel:"Field",defaultLookupKey:null},configrules:{defaultLookupKey:jTAC.checkAsStrOrNull},getTextValue:function(){this.AM()},setTextValue:function(a){this.AM()},typeSupported:function(a){this.AM()},getTypedValue:function(a){this.AM()},setTypedValue:function(a){this.AM()},isNullValue:function(a){this.AM()},isValidValue:function(a){if(!this.typeSupported(a)){return true}if(this.isNullValue()){return true}try{var c=this.getTypedValue(a);if((c==null)||isNaN(c)){return false}}catch(b){return false}return true},textLength:function(){var a=this.getTextValue();return a?a.length:0},isEditable:function(){return true},getLabel:function(){return jTAC.translations.lookup(this.getDefaultLookupKey(),this.getDefaultLabel())},getTypeManager:function(){return null}};jTAC.define("Connections.Base",jTAC._internal.temp._Connections_Base);jTAC.checkAsConnection=function(b,a){return jTAC.checkAsClass(b,a,jTAC.Connections.Base)};jTAC.checkAsConnectionOrNull=function(a){return jTAC.checkAsConnection(a,null)};jTAC._internal.temp._Connections_BaseElement={extend:"Connections.Base","abstract":true,constructor:function(a){this.callParent([a])},config:{id:null,allowNone:false,trim:true,unassigned:null,unassignedCase:false},configrules:{id:jTAC.checkAsStrOrNull,unassigned:jTAC.checkAsStrOrNull},getElement:function(b){try{this._pushContext();if(this._internal.element!=null){return this._internal.element}var c=this.getId();if(!c){if(b==null){b=this.getAllowNone()}if(!b){this._error("Did not assign the id.")}return null}var a=document.getElementById(c);if(a){this._checkElement(a)}else{if(!a&&!this.getAllowNone()){this._error("HTML Element not found for "+c)}}return a}finally{this._popContext()}},setElement:function(a){this._internal.element=a},_checkElement:function(a){this.AM()},addEventListener:function(a,b,c){return false},addSupportEventListeners:function(a,b,c){},testElement:function(a){return false},testElementAndCreate:function(b){if(this.testElement(b)){var a=jTAC.createByClassName(this.$fullClassName);(typeof b=="string")?a.setId(b):a.setElement(b);return a}return null},getTypeManager:function(){var a,b=this.getElement(true);if(b){var a=this.getData("typemanager");if(a){return a}a=this._createTypeManager(b);if(a){if(a instanceof jTAC.TypeManagers.Base){this.setData("typemanager",a);return a}}}return null},_createTypeManager:function(el){try{this._pushContext();var tm=this.getData("typemanager");if(tm){return tm}tm=this.getData("jtac-typemanager");if(tm){if(typeof tm=="string"){try{tm=eval("("+tm+");")}catch(e){jTAC.error("JSon parsing error. "+e.message,this,null,true)}}if(tm.jtacClass){tm=jTAC.create(null,tm)}if(tm instanceof jTAC.TypeManagers.Base){this.setData("typemanager",tm);return tm}}var dt=this.getData("jtac-datatype");if(dt){tm=jTAC.create(dt,tm)}if(tm instanceof jTAC.TypeManagers.Base){this.setData("typemanager",tm);return tm}else{if(tm){this._error("data-jtac-typemanager or datatype could not convert into a TypeManager object.")}}return null}finally{this._popContext()}},getData:function(a){var c,b=this.getElement(true);if(b){var c=b["data-"+a];if(c===undefined){c=b.getAttribute("data-"+a);if(c!=null){b["data-"+a]=c}}}return c},setData:function(a,c){var b=this.getElement(true);if(b){b["data-"+a]=c}},isVisible:function(){return this._isDOMVisible(this.getElement(true))},_isDOMVisible:function(b){if(!b){return true}var a=1;while(a&&(b!=null)&&(b!=document.body)){a=!((b.style.visibility=="hidden")||(b.style.display=="none"));b=b.parentNode}return a},isEnabled:function(){return this._isDOMEnabled(this.getElement(true))},_isDOMEnabled:function(a){if(!a||a.disabled==null){return true}return !a.disabled},isEditable:function(){return this.isVisible()&&this.isEnabled()},getLabel:function(){var a=this._locateLabel(this.getElement(true));if(a==null){a=this.callParent()}return a},_locateLabel:function(b){if(!b){return null}var f=false;var a=b.getAttribute("data-msglabel");var e=b.getAttribute("data-msglabel-lookupid");if(e){a=jTAC.translations.lookup(e,a);f=true}if(a==null){var d=b.getAttribute("data-msglabel-from");if(d){var c=document.getElementById(d);if(c){a=c.innerHTML;f=true}}}if((a==null)&&window.jQuery){var c=$("label[for='"+b.id+"'][generated!='true']");if(c){a=c.html();f=true}}if(a&&f){a=this._cleanLabel(a);b.setAttribute("data-msglabel",a)}return a},_cleanLabel:function(a){var b=jTAC.replaceAll(a,"<(.|\n)+?>","");b=b.replace(/[^\dA-Za-z]+$/,"");b=b.replace(/^[^\dA-Za-z]+/,"");return b},getClass:function(){var a=this.getElement();if(a&&(a.className!=null)){return a.className}return""},setClass:function(a){var b=this.getElement();if(b&&(b.className!=null)){b.className=a}},addClass:function(b){if(!b){return false}var a=this.getClass();var c=jTAC.delimitedRE(b,"\\s");if(c.test(a)){return false}var d=jTAC.trimStr(a+" "+b);this.setClass(d);return true},removeClass:function(a){if(a){var c=this.getClass();var b=jTAC.delimitedRE(a,"\\s");c=jTAC.trimStr(c.replace(b," "));this.setClass(c)}},_cleanString:function(b){var a=this.getTrim()?jTAC.trimStr(b):b;return this._matchUnassigned(a)?"":a},_matchUnassigned:function(c){var b=this.getUnassigned();if(b){var a=this.getUnassignedCase();if((b==c)||(!a&&(b.toLowerCase()==c.toLowerCase()))){return true}}return false}};jTAC.define("Connections.BaseElement",jTAC._internal.temp._Connections_BaseElement);jTAC._internal.temp._Connections_FormElement={extend:"Connections.BaseElement",constructor:function(a){this.callParent([a])},config:{fixLength:true,buttons:null},getTextValue:function(){var a=this.getElement();if(a){return this._cleanString(this._getValueAttribute(a))}return null},setTextValue:function(b){var a=this.getElement();if(a){if(this._isCheckable(a)){a.checked=!!b}else{a.value=b}}},typeSupported:function(b){var c=this.getElement();if(c){if(c.tagName=="INPUT"){var a=c.valueAsDate!==undefined;var d=c.valueAsNumber!==undefined;switch(c.type){case"radio":return b=="boolean"||b=="index";case"checkbox":if(b=="boolean"){return true}else{if((b=="index")||(b=="indices")){return this.getButtons()!=null}else{return false}}case"date":case"month":return a&&(b=="date");case"datetime":case"datetime-local":return a&&((b=="date")||(b=="datetime")||(b=="time"));case"time":return a&&(b=="time");case"number":return d&&((b=="integer")||(b=="float"));case"range":return d&&(b=="integer")}}else{if(c.tagName=="SELECT"){return(b=="index")||(b=="indices")}}}return false},getTypedValue:function(d){var f=this.getElement();if(f){if(f.tagName=="INPUT"){switch(f.type){case"radio":case"checkbox":if(!d||(d=="boolean")){return f.checked}else{if(d=="index"){var g=this._createButtonsList(f);if(g){for(var e=0;e<g.length;e++){if(g[e].checked){return e}}return -1}}else{if((d=="indices")&&(f.type=="checkbox")){var g=this._createButtonsList(f);var c=new Array();if(g){for(var e=0;e<g.length;e++){if(g[e].checked){c.push(e)}}return c}}}}break;case"date":case"datetime":case"datetime-local":case"month":case"time":if(!d||(d=="date")){if(f.valueAsDate!==undefined){return f.valueAsDate}}break;case"number":case"range":if(!d||(d=="integer")||(d=="float")){if(f.valueAsNumber!==undefined){return !isNaN(f.valueAsNumber)?f.valueAsNumber:null}}break}}else{if(f.tagName=="SELECT"){if(!d||(d=="index")){return f.selectedIndex}else{if(d=="indices"){var b=new Array();for(var e=0;e<f.options.length;e++){if(f.options[e].selected){b.push(e)}}return b}}}}this._error("The HTML element "+this.getId()+" does not support the type "+d,"getTypedValue")}return null},setTypedValue:function(d){var b=this.getElement();if(b){if(b.tagName=="INPUT"){switch(b.type){case"radio":case"checkbox":if(typeof(d)=="boolean"){b.checked=d;return}else{if(typeof(d)=="number"){var c=this._createButtonsList(b);if(c){for(var a=0;a<c.length;a++){c[a].checked=a==d}return}}else{if((d instanceof Array)&&(b.type=="checkbox")){var c=this._createButtonsList(b);if(c){for(var a=0;a<c.length;a++){c[a].checked=d.indexOf(a)>-1}return}}}}break;case"date":case"datetime":case"datetime-local":case"month":case"time":if(d==null){b.value="";return}else{if(d instanceof Date){if(b.valueAsDate!==undefined){b.valueAsDate=d;return}}}break;case"number":case"range":if(d==null){b.value="";return}else{if(typeof(d)=="number"){if(b.valueAsNumber!==undefined){b.valueAsNumber=d;return}}}break}}else{if(b.tagName=="SELECT"){if(typeof(d)=="number"){b.selectedIndex=d;return}else{if(d instanceof Array){for(var a=0;a<b.options.length;a++){b.options[a].selected=d.indexOf(a)!=-1}return}}}}this._error("The HTML element "+this.getId()+" does not support the type of the value","setTypedValue")}},isNullValue:function(a){var b=this.getElement();if(b){if(!a&&this._isCheckable(b)){return false}return this._cleanString(this._getValueAttribute(b))==""}return true},textLength:function(){var e=this.getTextValue();if(!e){return 0}var b=e.length;if(this.getFixLength()){var d=this.getElement(true);if(d&&(d.tagName=="TEXTAREA")){var a;var c=this._internal.findEnterRE;if(!c){this._internal.findEnterRE=c=/([^\r](?=\n))|(\r$)|(^\n)/g}while((a=c.exec(e))!=null){b++}}}return b},_checkElement:function(a){if(a.value===undefined){this._error("HTML Element does not have a value attribute.")}},addEventListener:function(a,b,c){return this._addEvt(this.getElement(),a,b,c)},_addEvt:function(c,b,d,e){if(c){if(e){var a="data-formconnection-"+e;if(c.getAttribute(a)!=null){return true}c.setAttribute(a,true)}if((b=="onchange")&&this._isCheckable(c)){b="onclick"}if(c.addEventListener){c.addEventListener(b.substr(2),d,false);return true}else{if(c.attachEvent){c.attachEvent(b,d);return true}}}return false},addSupportEventListeners:function(a,e,f){var c=this.getElement(true);if(!c){return}var d=this._createButtonsList(c);if(d){for(var b=0;b<d.length;b++){if(c!=d[b]){this._addEvt(d[b],a,e,f)}}}},_createButtonsList:function(e){var c=this.getButtons();if(c){if(typeof(c)=="function"){c=c(e)}if(c instanceof Array){var a=[];for(var d=0;d<c.length;d++){if(typeof(c[d])=="string"){var f=document.getElementById(c[d]);if(f){a.push(f)}else{if(window.console){console.log("'"+c[d]+"' element not found on page. Check spelling and case. Specified in a Connections.FormElement using element id '"+e.id+"'.")}}}else{if(typeof(c[d])=="object"){a.push(c[d])}}}return a.length?a:null}}else{if(e.type=="radio"){c=document.getElementsByName(e.name);return c.length?c:null}}return null},testElement:function(b){if(typeof(b)=="string"){var a=document.getElementById(b);return a&&(a.form!=null)}else{return((typeof(b)=="object")&&(b.tagName!==undefined)&&(b.form!=null))}},_getValueAttribute:function(a){if(this._isCheckable(a)){if(!a.checked){return""}return a.value?a.value:"on"}return a.value},_isCheckable:function(a){return(a.tagName=="INPUT")&&/^(checkbox)|(radio)$/.test(a.type)},isVisible:function(){var d=this.getElement(true);if(!d){return true}var a=this._createButtonsList(d);if(a){for(var c=0;c<a.length;c++){if(this._isDOMVisible(a[c])){return true}}return false}else{return this._isDOMVisible(d)}},isEnabled:function(){var d=this.getElement(true);if(!d){return true}var a=this._createButtonsList(d);if(a){for(var c=0;c<a.length;c++){if(this._isDOMEnabled(a[c])){return true}}return false}else{return this._isDOMEnabled(d)}},_createTypeManager:function(b){var a=this.callParent([b]);if(a){return a}switch(b.type){case"checkbox":case"radio":return jTAC.createByClassName("TypeManagers.Boolean",null,true);break;case"date":return jTAC.createByClassName("TypeManagers.Date",null,true);break;case"datetime":case"datetime-local":return jTAC.createByClassName("TypeManagers.DateTime",null,true);break;case"month":return jTAC.createByClassName("TypeManagers.MonthYear",null,true);case"time":return jTAC.createByClassName("TypeManagers.TimeOfDay",null,true);break;case"number":return jTAC.createByClassName("TypeManagers.Float",null,true);break;case"range":return jTAC.createByClassName("TypeManagers.Integer",null,true);break}return null},setButtons:function(a){if(typeof(a)=="string"){a=window[a]}if((typeof(a)=="function")||(a instanceof Array)){this.config.buttons=a}else{this._error("Illegal value. See function's documentation.")}}};jTAC.define("Connections.FormElement",jTAC._internal.temp._Connections_FormElement);jTAC.defineAlias("FormElement","Connections.FormElement");jTAC.connectionResolver={_regCls:new Array(),_regFns:new Array(),_formElement:jTAC.create("Connections.FormElement"),register:function(a){try{jTAC._internal.pushContext("connectionResolver.register");for(var b=0;b<arguments.length;b++){var c=arguments[b];if(typeof(c)=="function"){this._regFns.push(c);continue}if(typeof c=="string"){c=jTAC.create(c,null,true)}if(c&&c.testElementAndCreate){this._regCls.push(c)}else{jTAC.error("Could not register an item.")}}}finally{jTAC._internal.popContext()}},create:function(f,a){try{jTAC._internal.pushContext("resolveConnection");var e=null;var d=typeof f=="string"?document.getElementById(f):f;if(d&&d.getAttribute){var b=d.getAttribute("data-jtac-connection");if(b){e=jTAC.create(b,null,true);if(e){if(!(e instanceof jTAC.Connections.Base)){jTAC.error("Unknown name in data-jtac-connection attribute of ["+d.id+"].",null,null,true);e=null}}}}if(!e){for(var c=0;c<this._regFns.length;c++){e=_regFns[c](f);if(e){break}}}if(!e){for(var c=0;c<this._regCls.length;c++){e=this._regCls[c].testElementAndCreate(f);if(e){break}}}if(a){if(e){e.allowNone=a.allowNone}else{if(a.testElement(f)){e=a}}}if(!e&&this._formElement.testElement(f)){e=jTAC.create("Connections.FormElement")}if(e){(typeof(f)=="string")?e.setId(f):e.setElement(f)}return e}finally{jTAC._internal.popContext()}}};if(!window.jTAC){throw new Error("window.jTAC not created.")}jTAC._internal.temp._TypeManagers_base={"abstract":true,constructor:function(a){},config:{friendlyName:null,friendlyLookupKey:null},configrule:{friendlyName:jTAC.checkAsStrOrNull,friendlyLookupKey:jTAC.checkAsStrOrNull},nativeTypeName:function(){this._AM()},dataTypeName:function(){this._AM()},storageTypeName:function(){this._AM()},toString:function(a){if(a===undefined){return this.$className}try{this._pushContext();if(typeof a=="string"){a=this.toValue(a)}a=this._reviewValue(a);return this._nativeToString(a)}finally{this._popContext()}},_nativeToString:function(a){this._AM()},toValue:function(b){try{this._pushContext("TypeManagers.Base ["+b+"]");if(typeof(b)==this.nativeTypeName()){return this._reviewValue(b)}if(typeof(b)!="string"){this._error("Must pass a string in the text parameter.")}if(this._isNull(b)){return null}var a=this._stringToNative(b);return this._reviewValue(a)}finally{this._popContext()}},toValueFromConnection:function(a){try{this._pushContext();if(!(a instanceof jTAC.Connections.Base)){this._error("Must pass a Connection class.")}if(a.typeSupported(this.storageTypeName())){return this._reviewValue(a.getTypedValue(this.storageTypeName()))}return this.toValue(a.getTextValue())}finally{this._popContext()}},_stringToNative:function(a){this._AM()},_isNull:function(a){return a==""||a==null},_reviewValue:function(a){if(typeof(a)!=this.nativeTypeName()){this._error("Type not supported")}return a},toValueNeutral:function(a){this._AM()},toStringNeutral:function(a){this._AM()},isValid:function(c,a){if(a==undefined){a=false}if(c==null){return a}if((typeof(c)=="string")&&(jTAC.trimStr(c)=="")){return a}try{return this.toValue(c)!=null}catch(b){return false}},compare:function(b,a){if(typeof(b)=="string"){b=this.toValue(b)}if(typeof(a)=="string"){a=this.toValue(a)}if((b==null)||(a==null)){this._error("Parameter value was null.")}if(b<a){return -1}else{if(b>a){return 1}}return 0},isValidChar:function(a){if((a==null)||(typeof(a)!="string")||(a.length!=1)){this._error("Parameter must be a single character.")}return true},toNumber:function(a){return null},getFriendlyName:function(){var a=this.config.friendlyName;var b=this.getFriendlyLookupKey();if(b){a=jTAC.translations.lookup(b,a)}if(a==null){a=this.dataTypeName()}return a},getFriendlyLookupKey:function(){if(this.config.friendlyLookupKey==null){return this.dataTypeName()}return this.config.friendlyLookupKey},round:function(g,h,c){if(c==-1){return g}if(jTAC.TypeManagers.Base.prototype.numDecPlaces(g)<=c){return g}var d=Math.pow(10,c);var a=g*d;switch(h){case 0:a=Math.abs(a);a=a.toFixed(1);a=parseFloat(a).toFixed(0);a=parseFloat(a);if(g<0){a=-a}return a/d;case 1:var b=Math.floor(a);var e=a-b;var b=(e==0.5)?((b%2==0)?b:b+1):Math.round(a);return b/d;case 2:a=Math.floor(Math.abs(a));if(g<0){a=-a}return a/d;case 3:a=Math.ceil(a);return a/d;case 4:a=Math.ceil(Math.abs(a));if(g<0){a=-a}return a/d;default:this._inputError("Too many decimal places.")}return 0},numDecPlaces:function(b){var c=jTAC.TypeManagers.Base.prototype.floatToString(b);var a=c.indexOf(".");if(a<0){return 0}return c.length-(a+1)},floatToString:function(c){var b=c.toString();if((b.indexOf("e-")>-1)&&c.toFixed){var a=b.match(/^.e\-(\d*)$/);var d=parseInt(a[1]);b=c.toFixed(d)}return b},asUTCDate:function(j,a,i,e,g,c){if((typeof j=="object")&&(j instanceof Date)){var b=j;j=b.getFullYear();a=b.getMonth();i=b.getDate();e=b.getHours();g=b.getMinutes();c=b.getSeconds()}if((j==null)||(a==null)||(i==null)){return null}if(e==null){e=0}if(g==null){g=0}if(c==null){c=0}var f=new Date(0);f.setUTCFullYear(j,a,i);f.setUTCHours(e,g,c,0);return f}};jTAC.define("TypeManagers.Base",jTAC._internal.temp._TypeManagers_base);jTAC.checkAsTypeManager=function(b,a){return jTAC.checkAsClass(b,a,jTAC.TypeManagers.Base)};jTAC.checkAsTypeManagerOrNull=function(a){return jTAC.checkAsTypeManager(a,null)};jTAC.addDataTypeAttributes=function(a,c,b){var d=jTAC.connectionResolver.create(a);d.setData("jtac-datatype",c);d.setData("jtac-typemanager",b)};jTAC.plugInParser=function(b,e){var c={config:{parserOptions:null,nativeParser:false},_parse:function(f){return this.getNativeParser()?this._nativeParse(f):this.getParserOptions().parse(f)},_valChars:function(){var f=this._nativeValChars();if(!this.getNativeParser()){var g=this.getParserOptions();if(g){f=g.valChars(f)}}return f},getParserOptions:function(){var f=this.config.parserOptions;if(!this.config.parserOptions){f=this.config.parserOptions=jTAC.create(b);f.owner=this;this._registerChild(f)}return f},setParserOptions:function(g){if((g==null)||(typeof g!="object")){this._error("Must pass an object whose properties match those on the parserOptions property.")}if(g.instanceOf&&g.instanceOf(b)){g.owner=this;this.config.parserOptions=g}else{var h=this.getParserOptions();for(var f in h.config){if(g[f]!==undefined){h.config[f]=g[f]}}}}};var a=jTAC.getClass(e);var d=a.prototype;if(d._parse===undefined){jTAC.error("Cannot use jTAC.plugInParser() with ["+e+"].")}d._nativeParse=d._parse;d._nativeValChars=d._valChars;jTAC.addMembers(e,c)};jTAC._internal.temp._TypeManagers_BaseCulture={extend:"TypeManagers.Base","abstract":true,constructor:function(a){this.callParent([a])},config:{cultureName:""},configrule:{cultureName:{valFnc:jTAC.checkAsStrOrNull,clearCache:true}},numberFormat:function(a){return jTAC.cultureInfo["num"+a]},currencyFormat:function(a){return jTAC.cultureInfo["cur"+a]},percentFormat:function(a){return jTAC.cultureInfo["pct"+a]},dateTimeFormat:function(a){return jTAC.cultureInfo["dt"+a]},isValidChar:function(c){if(!this.callParent([c])){return false}var a=this._cache;if(a.noREvalchar){return true}var b=a.valcharRE;if(!b){b=a.valcharRE=this._valCharRE();if(!b){a.noREvalchar=true;return true}}return b.test(c)},_valCharRE:function(){return null},setCultureName:function(a){this._defaultSetter("cultureName",a);this._clearCache()}};jTAC.define("TypeManagers.BaseCulture",jTAC._internal.temp._TypeManagers_BaseCulture);jTAC_Temp={config:{numNegPattern:"-n",numDecimals:2,numGroupSep:",",numDecimalSep:".",numGroupSizes:[3],numNegSymbol:"-",curNegPattern:"($n)",curPosPattern:"$n",curSymbol:"$",curDecimals:2,curGroupSep:",",curDecimalSep:".",curGroupSizes:[3],curNegSymbol:"-",pctNegPattern:"-n%",pctPosPattern:"n%",pctSymbol:"%",pctDecimals:2,pctGroupSep:",",pctDecimalSep:".",pctGroupSizes:[3],pctNegSymbol:"-",dtShortDateSep:"/",dtTimeSep:":",dtFirstDay:0,dtDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dtDaysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dtDaysShort:["Su","Mo","Tu","We","Th","Fr","Sa"],dtMonths:["January","February","March","April","May","June","July","August","September","October","November","December",""],dtMonthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],dtAM:"AM",dtPM:"PM",dtTwoDigitYearMax:2029,dtShortDatePattern:"M/d/yyyy",dtShortDatePatternMN:"MMM/d/yyyy",dtAbbrDatePattern:"MMM dd, yyyy",dtLongDatePattern:"MMMM dd, yyyy",dtShortTimePattern:"h:mm tt",dtLongTimePattern:"h:mm:ss tt",dtShortDurationPattern:"H:mm",dtLongDurationPattern:"H:mm:ss",dtShortDateShortTimePattern:"M/d/yyyy h:mm tt",dtShortDateLongTimePattern:"M/d/yyyy h:mm:ss tt",dtAbbrDateShortTimePattern:"MMM dd, yyyy h:mm tt",dtAbbrDateLongTimePattern:"MMM dd, yyyy h:mm:ss tt",dtLongDateShortTimePattern:"MMMM dd, yyyy h:mm tt",dtLongDateLongTimePattern:"MMMM dd, yyyy h:mm:ss tt",dtShortMonthDayPattern:"M/dd",dtShortMonthDayPatternMN:"MMM/dd",dtAbbrMonthDayPattern:"MMM dd",dtLongMonthDayPattern:"MMMM dd",dtShortMonthYearPattern:"M/yyyy",dtShortMonthYearPatternMN:"MMM/yyyy",dtAbbrMonthYearPattern:"MMM yyyy",dtLongMonthYearPattern:"MMMM yyyy"},configrules:{dtAM:jTAC.checkAsStrOrNull,dtPM:jTAC.checkAsStrOrNull}};jTAC.define("TypeManagers.CultureInfo",jTAC_Temp);jTAC.cultureInfo=jTAC.create("TypeManagers.CultureInfo");