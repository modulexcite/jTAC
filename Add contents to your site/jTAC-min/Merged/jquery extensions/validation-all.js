if(!window.jTAC){throw new Error("window.jTAC not created.")}jTAC._internal.temp._Conditions_Base={"abstract":true,constructor:function(a){this._createConnections(this.config.connections)},config:{enabled:true,lastEvaluateResult:null,trim:true,connections:new Array(),not:false,typeManager:null,datatype:null,autoDisable:true},configrules:{typeManager:jTAC.checkAsTypeManager,lastEvaluateResult:jTAC.checkAsIntOrNull,connections:{autoSet:false}},canEvaluate:function(){if(!this.getEnabled()){return false}if(this.getAutoDisable()&&!this._connsEditable()){return false}return true},evaluate:function(){try{this._pushContext();switch(this._evaluateRule()){case 1:return this.config.lastEvaluateResult=this.getNot()?0:1;case 0:return this.config.lastEvaluateResult=this.getNot()?1:0;default:this.config.lastEvaluateResult=-1;return -1}}finally{this._popContext()}},isValid:function(){return this.evaluate()!=0},_evaluateRule:function(){this.AM()},_createConnections:function(a){},_connsEditable:function(){var a=this.getConnections();if(a){for(var b=0;b<a.length;b++){if(!a[b].isEditable()){return false}}}return true},collectConnections:function(d){var a=this.getConnections();if(a){for(var b=0;b<a.length;b++){var c=a[b];d.push(c);if(c.collectConnections){c.collectConnections(d)}}}},_applyTrimToConns:function(a){var b=this.config.connections;for(var c=0;c<b.length;c++){var d=b[c];if(d.trim!==undefined){d.trim=a}}},_checkTypeManager:function(){if(!this.config.typeManager){jTAC.require("TypeManagers.Base");var b=this.config.connections;if(b&&b.length){var c=b[0];var a=c.getTypeManager();if(a){this.config.typeManager=a;return a}}this.config.typeManager=jTAC.create("TypeManagers.Integer")}return this.config.typeManager},setTrim:function(a){this.config.trim=jTAC.checkAsBool(a);this._applyTrimToConns(a)},setTypeManager:function(a){jTAC.require("TypeManagers.Base");this.config.typeManager=a?jTAC.checkAsTypeManager(a,this.config.typeManager):null},getDatatype:function(){return this.config.typeManager?this.config.typeManager.storageTypeName():null},setDatatype:function(a){this.setTypeManager(a)}};jTAC.define("Conditions.Base",jTAC._internal.temp._Conditions_Base);jTAC.checkAsCondition=function(b,a){return jTAC.checkAsClass(b,a,jTAC.Conditions.Base)};jTAC.checkAsConditionOrNull=function(a){if(!a){return null}return jTAC.checkAsCondition(a)};jTAC.evaluate=function(a){var b=jTAC.create(null,a);return b.evaluate()};jTAC.isValid=function(a){var b=jTAC.create(null,a);return b.isValid()};jTAC._internal.temp._Conditions_BaseOneConnection={extend:"Conditions.Base","abstract":true,require:["Connections.FormElement"],constructor:function(a){this.callParent([a])},config:{connection:null,elementId:null},_createConnections:function(a){a[0]=jTAC.create("Connections.FormElement")},getConnection:function(){return this.config.connections[0]},setConnection:function(a){this.config.connections[0]=jTAC.checkAsConnection(a,this.config.connections[0])},getElementId:function(){var a=this.config.connections[0];return a&&a.getId?a.getId():null},setElementId:function(c){var a=this.config.connections;var b=jTAC.connectionResolver.create(c,a[0]);if(b){a[0]=b}else{a[0].id=c}}};jTAC.define("Conditions.BaseOneConnection",jTAC._internal.temp._Conditions_BaseOneConnection);jTAC._internal.temp._Conditions_BaseTwoConnections={extend:"Conditions.BaseOneConnection","abstract":true,constructor:function(a){this.callParent([a])},config:{connection2:null,elementId2:null},_createConnections:function(a){this.callParent([a]);a[1]=jTAC.create("Connections.FormElement")},getConnection2:function(){return this.config.connections[1]},setConnection2:function(a){this.config.connections[1]=jTAC.checkAsConnection(a,this.config.connections[1])},getElementId2:function(){var a=this.config.connections[1];return a&&a.getId?a.getId():null},setElementId2:function(c){var a=this.config.connections;var b=jTAC.connectionResolver.create(c,a[1]);if(b){a[1]=b}else{a[1].id=c}}};jTAC.define("Conditions.BaseTwoConnections",jTAC._internal.temp._Conditions_BaseTwoConnections);jTAC._internal.temp._Conditions_BaseOneOrMoreConnections={extend:"Conditions.BaseOneConnection","abstract":true,constructor:function(a){this.callParent([a]);this._internal.allMustBeEditable=true},config:{moreConnections:[],ignoreNotEditable:true},_connsEditable:function(){if(this._internal.allMustBeEditable){return this.callParent()}var a=this.getConnections();if(a){for(var b=0;b<a.length;b++){if(a[b].isEditable()){return true}}}return false},getConnections:function(){var b=[];if(this.config.connections){b=this.config.connections.concat(b)}var a=this.getMoreConnections();for(var c=0;c<a.length;c++){b.push(a[c])}return b},_cleanupConnections:function(){var c=[];var a=this.getConnections();if(a){for(var b=0;b<a.length;b++){if(!this.getIgnoreNotEditable()||a[b].isEditable()){c.push(a[b])}}}return c},_resolveMoreConnections:function(){var a=this.config.moreConnections;for(var b=0;b<a.length;b++){var c=a[b];if(typeof c=="string"){var e=c;var d=jTAC.create("Connections.FormElement",{id:e});c=jTAC.connectionResolver.create(e,d);a[b]=c?c:d}else{if(!(c instanceof jTAC.Connections.Base)&&(typeof(c)=="object")){if(!c.jtacClass){this._error("Must define the Connection's class in the 'jtacClass' property of the object that describes a Connection.")}c=jTAC.create(null,c);a[b]=c}else{if(!(c instanceof jTAC.Connections.Base)){this._error("The moreConnections property must only contain Connection objects and JSon objects that generate Connection objects.")}}}}},getMoreConnections:function(){if(this.config.moreConnections){this._resolveMoreConnections()}return this.config.moreConnections}};jTAC.define("Conditions.BaseOneOrMoreConnections",jTAC._internal.temp._Conditions_BaseOneOrMoreConnections);jTAC._internal.temp._Conditions_BaseOperator={extend:"Conditions.BaseTwoConnections","abstract":true,constructor:function(a){this.callParent([a])},config:{operator:"="},configrules:{operator:["=","<>",">","<",">=","<="]},_compare:function(c,b){var a=this.getTypeManager().compare(c,b);switch(this.getOperator()){case"=":return a==0;case"<>":return a!=0;case">":return a==1;case"<":return a==-1;case">=":return a>-1;case"<=":return a<1}}};jTAC.define("Conditions.BaseOperator",jTAC._internal.temp._Conditions_BaseOperator);jTAC._internal.temp._Conditions_BaseCounter={extend:"Conditions.BaseOneOrMoreConnections","abstract":true,constructor:function(a){this.callParent([a])},config:{minimum:null,maximum:null},configrules:{minimum:jTAC.checkAsIntOrNull,maximum:jTAC.checkAsIntOrNull},canEvaluate:function(){if((this.getMinimum()==null)&&(this.getMaximum()==null)){return false}return this.callParent()},_evaluateRule:function(){var c=this._cleanupConnections();var b=c.length;if(!b){return -1}var f=0;for(var e=0;e<c.length;e++){f+=this._connCount(c[e])}this.count=f;var d=this.getMinimum();var a=this.getMaximum();if((d!=null)&&(f<d)){return 0}if((a!=null)&&(f>a)){return 0}return 1},_connCount:function(a){this._AM()}};jTAC.define("Conditions.BaseCounter",jTAC._internal.temp._Conditions_BaseCounter);jTAC._internal.temp._Conditions_Required={extend:"Conditions.BaseOneOrMoreConnections",constructor:function(a){this.callParent([a]);this._internal.allMustBeEditable=false},config:{mode:"OneOrMore",minimum:0,maximum:999},configrules:{mode:["All","OneOrMore","AllOrNone","One","Range"]},_evaluateRule:function(){var b=this.getMoreConnections();if(b.length==0){var f=this.getConnection();if(!f.isEditable()){return -1}return this.count=(f.isNullValue(true)?0:1)}var c=this._cleanupConnections();var a=c.length;if(!a){return -1}var e=0;for(var d=0;d<c.length;d++){if(!c[d].isNullValue(true)){e++}}this.count=e;switch(this.getMode()){case"All":return e==a?1:0;case"OneOrMore":return(e>0)?1:0;case"AllOrNone":return((e==0)||(e==a))?1:0;case"One":return(e==1)?1:0;case"Range":return((this.getMinimum()<=e)&&(e<=this.getMaximum()))?1:0;default:this._error("Unknown mode name.")}}};jTAC.define("Conditions.Required",jTAC._internal.temp._Conditions_Required);jTAC.defineAlias("Required","Conditions.Required");jTAC._internal.temp._Conditions_DataTypeCheck={extend:"Conditions.BaseOneConnection",constructor:function(a){this.callParent([a])},_evaluateRule:function(){var b=this.getConnection();if(b.isNullValue()){return -1}try{var a=this.getTypeManager().toValueFromConnection(b);return a!=null?1:-1}catch(c){return 0}},getTypeManager:function(){return this._checkTypeManager()}};jTAC.define("Conditions.DataTypeCheck",jTAC._internal.temp._Conditions_DataTypeCheck);jTAC.defineAlias("DataTypeCheck","Conditions.DataTypeCheck");jTAC._internal.temp._Conditions_Range={extend:"Conditions.BaseOneConnection",constructor:function(a){this.callParent([a])},config:{minimum:null,maximum:null,lessThanMax:false},canEvaluate:function(){return this.callParent()&&((this.config.minimum!=null)||(this.config.maximum!=null))},_evaluateRule:function(){var d=this.getConnection();if(d.isNullValue()){return -1}var b=this.getTypeManager();var c,a;var h="minimum";try{c=b.toValueNeutral(this.getMinimum());if((c==null)&&b.getMinValue){c=b.getMinValue}h="maximum";a=b.toValueNeutral(this.getMaximum());if((a==null)&&b.getMaxValue){a=b.getMaxValue}}catch(g){var i=h+" property must be in the culture neutral format for "+b.storageTypeName()+" on element id "+d.getId()+". "+g.message;this._error(i)}try{var f=b.toValueFromConnection(d);if(f==null){return -1}}catch(g){return -1}if(c!=null){if(b.compare(f,c)<0){return 0}}if(a!=null){if(this.getLessThanMax()){if(b.compare(f,a)>=0){return 0}}else{if(b.compare(f,a)>0){return 0}}}return 1},getTypeManager:function(){return this._checkTypeManager()}};jTAC.define("Conditions.Range",jTAC._internal.temp._Conditions_Range);jTAC.defineAlias("Range","Conditions.Range");jTAC._internal.temp._Conditions_CompareToValue={extend:"Conditions.BaseOperator",constructor:function(a){this.callParent([a])},config:{valueToCompare:null},_createConnections:function(a){this.callParent([a]);a[1].setAllowNone(true)},canEvaluate:function(){return this.callParent()&&(this.config.valueToCompare!=null)},_evaluateRule:function(){var d=this.getConnection();if(d.isNullValue()||(this.getValueToCompare()==null)){return -1}var b=this.getTypeManager();var a=null;try{a=b.toValueNeutral(this.getValueToCompare())}catch(f){var g="valueToCompare property must be in the culture neutral format for "+b.storageTypeName()+" on element id "+d.getId()+". "+f.message;this._error(g)}try{var c=b.toValueFromConnection(d);if((c==null)||(a==null)){return -1}return this._compare(c,a)?1:0}catch(f){return -1}},getTypeManager:function(){return this._checkTypeManager()}};jTAC.define("Conditions.CompareToValue",jTAC._internal.temp._Conditions_CompareToValue);jTAC.defineAlias("CompareToValue","Conditions.CompareToValue");jTAC._internal.temp._Conditions_CompareTwoElements={extend:"Conditions.BaseOperator",constructor:function(a){this.callParent([a])},_evaluateRule:function(){var f=this.getConnection();var c=this.getConnection2();if(f.isNullValue()||c.isNullValue()){return -1}try{var b=this.getTypeManager();var d=b.toValueFromConnection(f);var a=b.toValueFromConnection(c);if((d==null)||(a==null)){return -1}return this._compare(d,a)?1:0}catch(g){return -1}},getTypeManager:function(){return this._checkTypeManager()}};jTAC.define("Conditions.CompareTwoElements",jTAC._internal.temp._Conditions_CompareTwoElements);jTAC.defineAlias("CompareTwoElements","Conditions.CompareTwoElements");jTAC._internal.temp._Conditions_BaseRegExp={extend:"Conditions.BaseOneConnection","abstract":true,constructor:function(a){this.callParent([a])},config:{ignoreBlankText:true},canEvaluate:function(){if(!this.getExpression()){return false}return this.callParent()},_evaluateRule:function(){var b=this._internal.regex;if(!b){var d=this._getExpression();if(!d){return -1}var c="";if(this._getCaseIns()){c+="i"}if(this._getGlobal()){c+="g"}if(this._getMultiline()){c+="m"}b=this._internal.regex=new RegExp(d,c)}var a=this.connection.getTextValue();if(!a){return this.getIgnoreBlankText()?-1:0}return b.test(a)?1:0},_getExpression:function(){this._AM()},_getCaseIns:function(){return false},_getGlobal:function(){return false},_getMultiline:function(){return false}};jTAC.define("Conditions.BaseRegExp",jTAC._internal.temp._Conditions_BaseRegExp);jTAC._internal.temp._Conditions_RegExp={extend:"Conditions.BaseRegExp",constructor:function(a){this.callParent([a])},config:{expression:"",caseIns:true,global:false,multiline:false},_getExpression:function(){return this.getExpression()},_getCaseIns:function(){return this.getCaseIns()},_getGlobal:function(){return this.getGlobal()},_getMultiline:function(){return this.getMultiline()}};jTAC.define("Conditions.RegExp",jTAC._internal.temp._Conditions_RegExp);jTAC.defineAlias("RegExp","Conditions.RegExp");jTAC._internal.temp._Conditions_Difference={extend:"Conditions.BaseOperator",constructor:function(a){this.callParent([a])},config:{differenceValue:1},configrules:{differenceValue:function(a){if(typeof a=="number"){return a}jTAC.error("Requires a number")}},_evaluateRule:function(){var d=this.getConnection();if(d.isNullValue()){return -1}try{var b=this.getTypeManager();var c=b.toValueFromConnection(d);var a=b.toValueFromConnection(this.getConnection2());if((c==null)||(a==null)){return -1}c=b.toNumber(c);a=b.toNumber(a);if((c==null)||(a==null)){return -1}return this._compare(Math.abs(c-a),this.getDifferenceValue())?1:0}catch(f){return -1}},getTypeManager:function(){return this._checkTypeManager()}};jTAC.define("Conditions.Difference",jTAC._internal.temp._Conditions_Difference);jTAC.defineAlias("Difference","Conditions.Difference");jTAC._internal.temp._Conditions_RequiredIndex={extend:"Conditions.BaseOneConnection",constructor:function(a){this.callParent([a])},config:{unassignedIndex:0},_evaluateRule:function(){var a=this.getConnection();if(a.typeSupported("index")){var b=a.getTypedValue("index");return(b!=this.getUnassignedIndex())?1:0}else{this._error("The element ["+this.getElementId()+"] does not support list lookup functions.")}}};jTAC.define("Conditions.RequiredIndex",jTAC._internal.temp._Conditions_RequiredIndex);jTAC.defineAlias("RequiredIndex","Conditions.RequiredIndex");jTAC._internal.temp._Conditions_SelectedIndex={extend:"Conditions.BaseOneConnection",constructor:function(a){this.callParent([a])},config:{index:null},canEvaluate:function(){if(this.getIndex()==null){return false}return this.callParent()},_evaluateRule:function(){function b(j,f){for(var g=0;g<f.length;g++){var h=f[g];if(h instanceof Array){if(h.length!=2){this._error("Invalid range. Must be array of 2 integers.")}if((h[0]<=j)&&(j<=h[1])){return true}}else{if(j==h){return true}}}return false}var a=this.getIndex();var d=this.getConnection();if(d.typeSupported("indices")){var e=d.getTypedValue("indices");if(typeof a=="number"){if(a==-1){return e.length==0?1:0}a=[a]}for(var c=0;c<e.length;c++){if(b(e[c],a)){return 1}}return 0}else{if(d.typeSupported("index")){var e=d.getTypedValue("index");if(a instanceof Array){return b(e,a)?1:0}return(e==a)?1:0}else{this._error("The element ["+this.getElementId()+"] does not support list lookup functions.")}}},setIndex:function(a){if(a instanceof Array){this.config.index=a}else{this.config.index=jTAC.checkAsIntOrNull(a)}}};jTAC.define("Conditions.SelectedIndex",jTAC._internal.temp._Conditions_SelectedIndex);jTAC.defineAlias("SelectedIndex","Conditions.SelectedIndex");jTAC._internal.temp._Conditions_BooleanLogic={extend:"Conditions.Base",constructor:function(a){this.callParent([a])},config:{operator:"OR",conditions:[]},configrules:{operator:["OR","AND"]},canEvaluate:function(){if(!this.getConditions().length){return false}return this.callParent()},_evaluateRule:function(){var f;this._cleanupConditions();var b=this.getConditions();var e=this.getOperator()=="AND";for(var a=0;a<b.length;a++){var c=b[a];if(c.canEvaluate()){var d=c.evaluate();if(d!=-1){f=true;if(d){if(!e){return 1}}else{if(e){return 0}}}}}if(!f){return -1}return e?1:0},_cleanupConditions:function(){try{this._pushContext();var b=this.getConditions();for(var a=0;a<b.length;a++){var c=b[a];if(!(c instanceof jTAC.Conditions.Base)&&(typeof(c)=="object")){if(!c.jtacClass){this._error("Must define the Condition's class in the 'jtacClass' property of the object that describes a condition.")}c=jTAC.create(null,c);b[a]=c}else{if(!(c instanceof jTAC.Conditions.Base)){this._error("The conditions property must only contain Condition objects and JSon objects that generate Condition objects.")}}}}finally{this._popContext()}},collectConnections:function(c){this.callParent([c]);this._cleanupConditions();var b=this.getConditions();if(b){for(var a=0;a<b.length;a++){b[a].collectConnections(c)}}}};jTAC.define("Conditions.BooleanLogic",jTAC._internal.temp._Conditions_BooleanLogic);jTAC.defineAlias("BooleanLogic","Conditions.BooleanLogic");jTAC._internal.temp._Conditions_DuplicateEntry={extend:"Conditions.BaseOneOrMoreConnections",constructor:function(a){this.callParent([a])},config:{caseIns:true,ignoreUnassigned:true},_evaluateRule:function(){this._errconn1=null;this._errconn2=null;var b=this._cleanupConnections();var a=b.length;if(!a){return -1}var f=[];for(var c=0;c<b.length;c++){var e=b[c].getTextValue();if((e.length==0)&&this.getIgnoreUnassigned()){continue}if(this.getCaseIns()){e=e.toUpperCase()}var d=f[e];if(d!=null){this._errconn1=d;this._errconn2=b[c];return 0}f[e]=b[c]}return 1},};jTAC.define("Conditions.DuplicateEntry",jTAC._internal.temp._Conditions_DuplicateEntry);jTAC.defineAlias("DuplicateEntry","Conditions.DuplicateEntry");jTAC._internal.temp._Conditions_CharacterCount={extend:"Conditions.BaseCounter",constructor:function(a){this.callParent([a])},_connCount:function(a){return a.textLength()}};jTAC.define("Conditions.CharacterCount",jTAC._internal.temp._Conditions_CharacterCount);jTAC.defineAlias("CharacterCount","Conditions.CharacterCount");jTAC._internal.temp._Conditions_WordCount={extend:"Conditions.BaseCounter",constructor:function(a){this.callParent([a])},_connCount:function(d){var c=d.getTextValue();if(c.length==0){return 0}c=c.replace(new RegExp("'","gi"),"");var b=new RegExp(this._wordREPattern,"ig");var a=0;while(b.exec(c)!=null){a++}return a},_wordREPattern:"(\\b|^)(\\w+?)(\\b|$)"};jTAC.define("Conditions.WordCount",jTAC._internal.temp._Conditions_WordCount);jTAC.defineAlias("WordCount","Conditions.WordCount");jTAC._internal.temp._Conditions_CountSelections={extend:"Conditions.BaseCounter",constructor:function(a){this.callParent([a])},_connCount:function(a){if(a.typeSupported("indices")){return a.getTypedValue("indices").length}else{this._error("Connection does not specify a multiple selection list.")}}};jTAC.define("Conditions.CountSelections",jTAC._internal.temp._Conditions_CountSelections);jTAC.defineAlias("CountSelections","Conditions.CountSelections");jTAC._internal.temp._Connections_Value={extend:"Connections.Base",constructor:function(a){this.callParent([a])},config:{value:null,nullValue:null,supportedTypeName:null},getTextValue:function(){var c=this.getValue();if(c==null){c=""}else{var a=this.getTypeManager();try{c=a?a.toString(c):c.toString()}catch(b){c=c.toString()}}return c},setTextValue:function(a){this.setValue(a)},typeSupported:function(a){return a==this.getSupportedTypeName()},getTypedValue:function(a){if((a!=null)&&!this.typeSupported(a)){this._error("Type not supported")}return this.getValue()},setTypedValue:function(a){this.setValue(a)},isNullValue:function(a){if(!a&&(typeof(this._value)=="boolean")){return false}return this.getValue()==this.getNullValue()},getTypeManager:function(){switch(this.getSupportedTypeName()){case"boolean":return jTAC.create("TypeManagers.Boolean",null,true);break;case"integer":return jTAC.create("TypeManagers.Integer",null,true);break;case"float":return jTAC.create("TypeManagers.Float",null,true);break;case"date":return jTAC.create("TypeManagers.Date",null,true);break}return null},_updateTypeName:function(a){if(a!=null){var b=this.getSupportedTypeName();if(typeof(a)=="number"){if(b!="float"){b="integer"}}else{if(typeof(a)=="boolean"){b="boolean"}else{if(typeof(a)=="object"){if(a instanceof Date){b="date"}}}}this.setSupportedTypeName(b)}},setValue:function(a){this.config.value=a;this._updateTypeName(a)}};jTAC.define("Connections.Value",jTAC._internal.temp._Connections_Value);(function(b){if(b.validator.replaceTokens){return}var a={formatAndAdd:function(e,g){var f=this.defaultMessage(e,g.method),d=/\$?\{(\d+)\}/g;if(typeof f==="function"){f=f.call(this,g.parameters,e)}var c=b.validator.replaceTokens[g.method];if(!c){c=b.validator.defaultTokenReplacer}f=c.call(b.validator,f,e,g.parameters,b(e).val());this.errorList.push({message:f,element:e});this.errorMap[e.name]=f;this.submitted[e.name]=f},defaultTokenReplacer:function(e,c,h,g){var d=/\$?\{(\d+)\}/g;if(d.test(e)){e=b.validator.format(e.replace(d,"{$1}"),h)}if(g==null){g=""}e=this.tokenReplacer(e,"VALUE",g.toString());var f=this.elementLabel(c)||"*** Add the data-msglabel attribute to id "+c.id+". ***";e=this.tokenReplacer(e,"LABEL",f);return e},tokenReplacer:function(f,d,c){var e=new RegExp("\\{"+d+"\\}","ig");return f.replace(e,c.toString())},minMaxReplacer:function(f,d,c,e){if(d!=null){f=this.tokenReplacer(f,"MIN",d)}if(c!=null){f=this.tokenReplacer(f,"MAX",c)}if(e!=null){f=this.tokenReplacer(f,"LENGTH",e);if(typeof d!=="number"){d=0}if(typeof c!=="number"){c=99999999}var g=Math.max(e-c,d-e);f=this.tokenReplacer(f,"DIFF",g)}return f},elementLabel:function(d){if(!d){return null}var c=d.getAttribute("data-msglabel");if(c==null){var e=b("label[for='"+d.id+"'][generated!='true']");if(e){c=e.html();if(c){c=c.replace(/\<(.|\n)+?\>/ig,"");c=c.replace(/[^\dA-Za-z]+$/,"");c=c.replace(/^[^\dA-Za-z]+/,"");d.setAttribute("data-msglabel",c)}}}return c},replaceTokens:{minlength:function(d,c,f,e){d=b.validator.minMaxReplacer(d,f,null,e.length);return b.validator.defaultTokenReplacer(d,c,f,e)},maxlength:function(d,c,f,e){d=b.validator.minMaxReplacer(d,null,f,e.length);return b.validator.defaultTokenReplacer(d,c,f,e)},rangelength:function(d,c,f,e){d=b.validator.minMaxReplacer(d,f[0],f[1],e.length);return b.validator.defaultTokenReplacer(d,c,f,e)},min:function(d,c,f,e){d=b.validator.minMaxReplacer(d,f,null,null);return b.validator.defaultTokenReplacer(d,c,f,e)},max:function(d,c,f,e){d=b.validator.minMaxReplacer(d,null,f,null);return b.validator.defaultTokenReplacer(d,c,f,e)},range:function(d,c,f,e){d=b.validator.minMaxReplacer(d,f[0],f[1],null);return b.validator.defaultTokenReplacer(d,c,f,e)}}};b.extend(b.validator.prototype,a);b.extend(b.validator,a)}(jQuery));if(!window.jTAC){throw new Error("window.jTAC not created.")}jTAC.require("Conditions.Base");jTAC_Temp={config:{depends:null,lookupKey:null},configrule:{lookupKey:jTAC.checkAsStrOrNull},replaceTokens:function(d,c){var b=d;switch(c.context){case"alert":b=jTAC.replaceAll(b,"{NEWLINE}","\n",true);case"tooltip":b=jTAC.replaceAll(b,"{NEWLINE}","\r",true);b=jTAC.replaceAll(b,"<(.|\n)+?>","");break;default:b=jTAC.replaceAll(b,"{NEWLINE}","<br />",true);break}if(jTAC.contains(b,"{ERRORLABEL}",true)){var a=c.messagelabel;b=jTAC.replaceAll(b,"{ERRORLABEL}",a!=null?a:"messagelabel")}return b},_replaceToken:function(c,b,a){if(jTAC.contains(c,b,true)){c=jTAC.replaceAll(c,b,a.toString(),true)}return c},_spReplaceToken:function(e,c,b){var d=new RegExp("\\{"+b+":([^:}]*):([^:}]*)\\}");var a=d.exec(e);if((a!=null)&&(a.length==3)){var f=new RegExp("{"+b+":"+a[1]+":"+a[2]+"}","gi");if(c==1){return e.replace(f,a[1])}else{return e.replace(f,a[2])}}return e},_tmReplaceToken:function(i,g,f,d){if(jTAC.contains(f)){var b=g;var c=this.getTypeManager();if(c){var a=jTAC.silentWarnings();jTAC.silentWarnings(true);try{try{if(typeof(b)=="string"){b=c.toValueNeutral(b)}b=c.toString(b);if(d.context=="html"){b=jTAC.htmlEncode(b)}}catch(h){b=g}}finally{jTAC.silentWarnings(a)}}i=jTAC.replaceAll(i,f,b,true)}return i},defaultErrorMessage:function(){return""},setDepends:function(a){if(typeof a=="function"){this.config.depends=a}else{if((typeof a=="string")&&(a.indexOf("{")!=0)){this.config.depends=a}else{this.config.depends=jTAC.checkAsConditionOrNull(a)}}},canEvaluate:function(){if(!this.getEnabled()){return false}if(this.getAutoDisable()&&!this._connsEditable()){return false}var b=this.getDepends();if(b){if(typeof b=="function"){var a=null;if(b.getConnection){a=b.getConnection().getElement()}return b.call(this,a)}else{if((typeof b=="object")&&b.canEvaluate()&&(b.evaluate()==0)){return false}}if(typeof b=="string"){return $(b).length>0}}return true},ruleName:function(){return this.$className.toLowerCase()}};jTAC.addMembers("Conditions.Base",jTAC_Temp);if(jTAC.isDefined("Conditions.BaseOneConnection")){jTAC_Temp={replaceTokens:function(d,b){var a=this.callParent([d,b]);var c=this.getConnection();a=this._tmReplaceToken(a,c.getTextValue(),"{VALUE}",b);if(jTAC.contains(a,"{LABEL}",true)){a=jTAC.replaceAll(a,"{LABEL}",c.getLabel()||"<strong>Warning: No label defined for "+c.getId()+". Use &lt;Label for=&gt; or data-msglabel='label' in the element.</strong>",true)}return a}};jTAC.addMembers("Conditions.BaseOneConnection",jTAC_Temp)}if(jTAC.isDefined("Conditions.BaseTwoConnections")){jTAC_Temp={replaceTokens:function(d,b){var a=this.callParent([d,b]);var c=this.getConnection2();a=this._tmReplaceToken(a,c.getTextValue(),"{VALUE2}",b);if(jTAC.contains(a,"{LABEL2}",true)){a=jTAC.replaceAll(a,"{LABEL2}",c.getLabel()||"<strong>Warning: No label defined for "+c.getId()+". Use &lt;Label for=&gt; or data-msglabel='label' in the element.</strong>",true)}return a}};jTAC.addMembers("Conditions.BaseTwoConnections",jTAC_Temp)}if(jTAC.isDefined("Conditions.DataTypeCheck")){jTAC_Temp={replaceTokens:function(d,c){var b=this.callParent([d,c]);if(jTAC.contains(b,"{DATATYPE}",true)){var a=this.getTypeManager().getFriendlyName();b=jTAC.replaceAll(b,"{DATATYPE}",a,true)}return b},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be a valid {DATATYPE}."}};jTAC.addMembers("Conditions.DataTypeCheck",jTAC_Temp)}if(jTAC.isDefined("Conditions.Range")){jTAC_Temp={ruleName:function(){return"advrange"},replaceTokens:function(c,b){var a=this.callParent([c,b]);a=this._tmReplaceToken(a,this.getMinimum(),"{MINIMUM}",b);a=this._tmReplaceToken(a,this.getMaximum(),"{MAXIMUM}",b);return a},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be between {MINIMUM} and {MAXIMUM}."}};jTAC.addMembers("Conditions.Range",jTAC_Temp)}if(jTAC.isDefined("Conditions.BaseOperator")){jTAC_Temp={replaceTokens:function(d,c){var b=this.callParent([d,c]);var a=this.getOperator();a=jTAC.translations.lookup(a,a);if(c.context=="html"){a=jTAC.htmlEncode(a)}b=jTAC.replaceAll(b,"{OPERATOR}",a,true);return b}};jTAC.addMembers("Conditions.BaseOperator",jTAC_Temp)}if(jTAC.isDefined("Conditions.CompareToValue")){jTAC_Temp={replaceTokens:function(c,b){var a=this.callParent([c,b]);a=this._tmReplaceToken(a,this.getValueToCompare(),"{VALUETOCOMPARE}",b);return a},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be {OPERATOR} {VALUETOCOMPARE}."}};jTAC.addMembers("Conditions.CompareToValue",jTAC_Temp)}if(jTAC.isDefined("Conditions.CompareTwoElements")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be {OPERATOR} <span class='{ERRORLABEL}'>{LABEL2}</span>."}};jTAC.addMembers("Conditions.CompareTwoElements",jTAC_Temp)}if(jTAC.isDefined("Conditions.Difference")){jTAC_Temp={replaceTokens:function(e,d){var c=this.callParent([e,d]);if(jTAC.contains(c,"{DIFFVALUE}",true)){var a=this.getDifferenceValue();if(typeof(a)!="string"){var b=jTAC.create("TypeManagers.Float");b.setTrailingZeroDecimalPlaces(0);b.setMaxDecimalPlaces(3);a=b.toString(a)}if(d.context=="html"){a=jTAC.htmlEncode(a)}c=jTAC.replaceAll(c,"{DIFFVALUE}",a,true)}return c},defaultErrorMessage:function(){return"Difference between <span class='{ERRORLABEL}'>{LABEL}</span> and <span class='{ERRORLABEL}'>{LABEL2}</span> must be {OPERATOR} {DIFFVALUE}."}};jTAC.addMembers("Conditions.Difference",jTAC_Temp)}if(jTAC.isDefined("Conditions.Required")){jTAC_Temp={ruleName:function(){return"advrequired"},replaceTokens:function(d,c){var b=this.callParent([d,c]);var a=this.count;if(a==null){a=0}b=jTAC.replaceAll(b,"{COUNT}",a.toString(),true);b=jTAC.replaceAll(b,"{MINIMUM}",this.getMinimum().toString(),true);return jTAC.replaceAll(b,"{MAXIMUM}",this.getMaximum().toString(),true)},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> requires an entry."}};jTAC.addMembers("Conditions.Required",jTAC_Temp)}if(jTAC.isDefined("Conditions.RequiredIndex")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> requires a selection."}};jTAC.addMembers("Conditions.RequiredIndex",jTAC_Temp)}if(jTAC.isDefined("Conditions.SelectedIndex")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> has an invalid selection. Choose another."}};jTAC.addMembers("Conditions.SelectedIndex",jTAC_Temp)}if(jTAC.isDefined("Conditions.BaseCounter")){jTAC_Temp={replaceTokens:function(g,f){var e=this.callParent([g,f]);var d=this.count;if(d==null){d=0}e=jTAC.replaceAll(e,"{COUNT}",d.toString(),true);e=this._spReplaceToken(e,d,"COUNT");var c=this.getMinimum();if(c==null){c=0}e=jTAC.replaceAll(e,"{MINIMUM}",c.toString(),true);var b=this.getMaximum();if(b==null){b=9999999}e=jTAC.replaceAll(e,"{MAXIMUM}",b.toString(),true);var a=Math.max(c-d,d-b);e=jTAC.replaceAll(e,"{DIFF}",a.toString(),true);e=this._spReplaceToken(e,a,"DIFF");return e}};jTAC.addMembers("Conditions.BaseCounter",jTAC_Temp)}if(jTAC.isDefined("Conditions.CharacterCount")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must have between {MINIMUM} and {MAXIMUM} characters."}};jTAC.addMembers("Conditions.CharacterCount",jTAC_Temp)}if(jTAC.isDefined("Conditions.WordCount")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must have between {MINIMUM} and {MAXIMUM} words."}};jTAC.addMembers("Conditions.WordCount",jTAC_Temp)}if(jTAC.isDefined("Conditions.CountSelections")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must have between {MINIMUM} and {MAXIMUM} selections."}};jTAC.addMembers("Conditions.CountSelections",jTAC_Temp)}if(jTAC.isDefined("Conditions.RegExp")){jTAC_Temp={config:{patternLabel:"format",patternLookupKey:null},configrule:{patternLookupKey:jTAC.checkAsStrOrNull},replaceTokens:function(d,c){var b=this.callParent([d,c]);var a=jTAC.translations.lookup(this.getPatternLookupKey(),this.getPatternLabel());if(c.context=="html"){a=jTAC.htmlEncode(a)}return jTAC.replaceAll(b,"{PATTERN}",a,true)},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be a valid {PATTERN}."}};jTAC.addMembers("Conditions.RegExp",jTAC_Temp)}if(jTAC.isDefined("Conditions.DuplicateEntry")){jTAC_Temp={replaceTokens:function(d,c){var b=this.callParent([d,c]);if(jTAC.contains(b,"{LABEL",true)){var a="field 1";if(this._errconn1){a=this._errconn1.getLabel()}b=jTAC.replaceAll(b,"{LABEL1}",a,true);a="field 2";if(this._errconn2){a=this._errconn2.getLabel()}b=jTAC.replaceAll(b,"{LABEL2}",a,true)}return b},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL1}</span> must be different from <span class='{ERRORLABEL}'>{LABEL2}</span>."}};jTAC.addMembers("Conditions.DuplicateEntry",jTAC_Temp)}if(jTAC.isDefined("Conditions.BooleanLogic")){jTAC_Temp={defaultErrorMessage:function(){return"*** EXPLICITY ASSIGN THIS MESSAGE ***"}};jTAC.addMembers("Conditions.BooleanLogic",jTAC_Temp)}if(!window.jTAC){throw new Error("window.jTAC not created.")}if(!window.jQuery||!$.validator){jTAC.error("Must load jquery and jquery-validate script files first.")}if($.validator.replaceTokens===undefined){jTAC.error("Must load /jTAC/jquery-validate/ReplaceTokens PlugIn.js script file before Rules.js.")}jTAC.require(["Connections.FormElement","TypeManagers.Base","Conditions.Base"]);jTAC.jqueryValidate=(function(){var unobtrusive=$.validator?$.validator.unobtrusive:null;function createCondition(element,condname,param){try{jTAC._internal.pushContext("jqueryValidate.createCondition()",condname);delete param.Condition;var cond;if(typeof(param)=="function"){cond=param()}else{if(typeof(param)=="object"){cond=jTAC.create(condname,param)}else{if((param===true)||(param==null)){cond=jTAC.create(condname,null)}else{jTAC.error("Value for a condition function must be an object.")}}}if(element&&(cond.connection instanceof jTAC.Connections.BaseElement)){cond.connection=jTAC.connectionResolver.create(element,cond.connection)}return cond}finally{jTAC._internal.popContext()}}function evaluate(element,condname,params){try{jTAC._internal.pushContext("jqueryValidate.evaluate()",condname);if(params==null){jTAC.error("Params must be assigned.")}if(!condname&&params.jtacClass){condname=params.jtacClass}delete params.jtacClass;var cond=params.Condition;if(!cond){cond=createCondition(element,condname,params);params.Condition=cond}if(!cond.canEvaluate.call(cond)){return"dependency-mismatch"}var r=cond.evaluate.call(cond);if(r==-1){return"dependency-mismatch"}return !!r}finally{jTAC._internal.popContext()}}function validate(validator,id){try{jTAC._internal.pushContext("jqueryValidate.validate('"+id+"')");var el=$("#"+id);if(el.valid()){validator.defaultShowErrors()}}finally{jTAC._internal.popContext()}}function defaultOptions(){var orig=$.prototype.validate;$.prototype.validate=function(options){if(this.length&&options){if(options.messagelabel===undefined){options.messagelabel="message-label"}if(options.labelErrorClass===undefined){options.labelErrorClass="label-validation-error"}if(options.containerErrorClass===undefined){options.containerErrorClass="container-validation-error"}if(options.messageErrorClass===undefined){options.messageErrorClass="message-validation-error"}if(options.messageValidClass===undefined){options.messageValidClass="message-validation-valid"}if(options.inputErrorClass===undefined){options.inputErrorClass=options.errorClass?options.errorClass:"input-validation-error"}options.errorClass=options.messageErrorClass;if(options.inputValidClass===undefined){options.inputValidClass=options.validClass?options.validClass:"input-validation-valid"}options.validClass=options.messageValidClass;if(unobtrusive||(options.errorPlacement===undefined)){if(!unobtrusive&&options.errorPlacement&&!options.errorPlacementFallback){options.errorPlacementFallback=options.errorPlacement}options.errorPlacement=$.proxy(onError,this[0])}if(unobtrusive||(options.success===undefined)){if(!unobtrusive&&options.success&&!options.successFallback){options.successFallback=options.success}options.success=$.proxy(onSuccess,this[0])}}return orig.call(this,options)}}defaultOptions();function mergeOptions(formElement,newOptions){var funcProps=["submitHandler","invalidHandler","invalidHandlerFallback","showErrors","errorPlacement","errorPlacementFallback","success","successFallback","highlight","unhighlight","highlight1","unhighlight1"];var validator=$.data(formElement[0],"validator");var options;if(validator&&validator.settings){options=validator.settings}else{validator=formElement.validate({});options=validator.settings}var val=newOptions.success||newOptions.successFallback;if(val){if(window[val]===undefined){funcProps.splice(funcProps.indexOf("success"),1)}}for(var propName in newOptions){if(!propName){continue}var val=newOptions[propName];if((funcProps.indexOf(propName)>-1)&&(typeof val=="string")){options[propName]=window[val];if((options[propName]==null)&&window.console){jTAC.warn("Validator options include the property ["+propName+" = '"+val+"']. This value must match a globally declared function.",null,"jqueryValidate.MergeOptions")}}else{options[propName]=val}}return options}function attachMultiConnections(formselector){try{jTAC._internal.pushContext("jqueryValidate.attachMultiConnections()");var form=$(formselector);if(!form||!form.length){return}var validator=$.data(form[0],"validator");var rules=validator.settings.rules;$.each(rules,function(key,value){if(!key){return}var el=document.getElementById(key);if(!el){el=document.getElementsByName(key);if(!el||!el.length){return}el=el[0]}$.each(value,function(childkey,paramcont){if(childkey=="messages"){return}var condname=ruleNameMap[childkey];if(condname==null){return}var srcId=el.id;var func=function(e){validate(validator,srcId)};try{var cond=createCondition(el,condname,paramcont.param?paramcont.param:paramcont);if(paramcont.param){paramcont.param.Condition=cond}var conns=[];cond.collectConnections(conns);for(var j=0;j<conns.length;j++){if(conns[j] instanceof jTAC.Connections.BaseElement){if(j>0){conns[j].addEventListener("onchange",func,"qvc"+el.id)}conns[j].addSupportEventListeners("onchange",func,"qvc"+el.id)}}}catch(e){jTAC.warn("Exception occurred when checking element "+srcId+", check the '"+condname+"' method. Exception message: "+e.message)}})})}finally{jTAC._internal.popContext()}}function installUnobtrusive(){if(runInstall){return}runInstall=true;try{jTAC._internal.pushContext("jqueryValidate.installUnobtrusive()");var forms=$("form");$.each(forms,function(key,form){form=$(form);var newOptions=form.data("val-options");if(newOptions){try{if(typeof newOptions=="string"){newOptions=window.eval("("+newOptions+");")}mergeOptions(form,newOptions)}catch(e){jTAC.error("Could not parse the data-val-options attribute of form id ["+form.get()[0].id+"] Error info:"+e.toString())}}attachMultiConnections(form)})}finally{jTAC._internal.popContext()}}var runInstall=false;if(unobtrusive){var postInit=[];unobtrusive.nativeParse=unobtrusive.parse;unobtrusive.parse=function(selector){unobtrusive.nativeParse(selector);installUnobtrusive();for(var i=0;i<postInit.length;i++){postInit[i]()}}}function registerConditionsAsRules(){try{jTAC._internal.pushContext("jqueryValidate.registerConditionsAsRules()");var defs=jTAC._internal.definitions;for(var fullClassName in defs){var def=jTAC.getDefinition(fullClassName);if(def.inst instanceof jTAC.Conditions.Base){if(!def.inst.$abstract){useConditionAsRule(def.inst.ruleName(),fullClassName)}}}}finally{jTAC._internal.popContext()}}var defaultMessages={};var ruleNameMap=[];function useConditionAsRule(ruleName,fullClassName){ruleNameMap[ruleName]=fullClassName;var ruleFnc=function(value,element,params){return evaluate.call(this,element,fullClassName,params)};var emFnc=function(ruleparms,element){return retrieveErrorMessage(ruleName,ruleparms)};$.validator.addMethod(ruleName,ruleFnc,emFnc);if($.validator.replaceTokens){$.validator.replaceTokens[ruleName]=replaceTokens}if($.validator.unobtrusive){$.validator.unobtrusive.adapters.add(ruleName,["json"],function(options){try{var obj=options.params.json?eval("("+options.params.json+")"):{};options.rules[ruleName]={param:obj}}catch(e){jTAC.error("Syntax error in data-val-"+ruleName+"-json attribute of the HTML element "+options.element.id+". Error reported: "+e+" Attribute value: "+options.params.json.toString())}if(options.message){options.messages[ruleName]=options.message}})}}function retrieveErrorMessage(ruleName,param){var cond=param.Condition;var defmsg=defaultMessages[ruleName];if(!defmsg){defmsg=defaultMessages[ruleName]=jTAC.translations.lookup(ruleName+"EM",cond.defaultErrorMessage())}if(cond&&cond.getLookupKey){var key=cond.getLookupKey();if(key){defmsg=jTAC.translations.lookup(key,defmsg)}}return defmsg}function replaceTokens(message,element,param,value){try{var cond=param.Condition;if(cond&&cond.replaceTokens){var validator=$.data(element.form,"validator");message=cond.replaceTokens.call(cond,message,{element:element,value:value,validator:validator,context:"html",messagelabel:validator.settings.messagelabel})}}catch(e){jTAC.warn('Exception occurred replacing tokens in message "'+message+'" of element '+(element?element.id:"[unknown]")+" Exception: "+e.message,null,"jqueryValidate.replaceTokens()")}return message}registerConditionsAsRules();function onError(error,inputElement){var validator=$.data(this,"validator");var options=validator.settings;var name=inputElement[0].name||inputElement[0].id;var container=$(this).find("[data-valmsg-for='"+name+"']");if(!container||!container.length){error.removeClass(options.messageValidClass).addClass(options.messageErrorClass);if(options.errorPlacementFallback){options.errorPlacementFallback.call(validator,error,inputElement)}else{error.insertAfter(inputElement)}return}container.removeClass("field-validation-valid").addClass("field-validation-error");error.data("unobtrusiveContainer",container);var ec=$(container).data("jtac-errorclass");if(ec==null){ec=options.messageErrorClass}var vc=$(container).data("jtac-validclass");if(vc==null){vc=options.messageValidClass}error.removeClass(vc).addClass(ec);var replace=$.parseJSON(container.attr("data-valmsg-replace"))!==false;if(replace){container.empty();error.appendTo(container)}else{error.hide()}}function onSuccess(error){var validator=$.data(this,"validator");var options=validator.settings;var container=error.data("unobtrusiveContainer");if(!container||!container.length){error.removeClass(options.messageErrorClass).addClass(options.messageValidClass);var fb=options.successFallback;if(fb!=null){if(typeof fb=="string"){label.addClass(fb)}else{fb.call(validator,error)}}return}if(container){var ec=$(container).data("jtac-errorclass");if(ec==null){ec=options.messageErrorClass}var vc=$(container).data("jtac-validclass");if(vc==null){vc=options.messageValidClass}container.removeClass("field-validation-error").addClass("field-validation-valid");error.removeData("unobtrusiveContainer");error.removeClass(ec).addClass(vc);var replace=$.parseJSON(container.attr("data-valmsg-replace"));if(replace){container.empty()}}}function defaultShowErrors(){function captureH(el,ec,vc){if(!el||!el.id){return}if(elementsFound[el.id]==undefined){elementsFound[el.id]={valid:false,element:el}}}function captureU(el,ec,vc){if(!el||!el.id){return}if((elementsFound[el.id]==undefined)||elementsFound[el.id]){elementsFound[el.id]={valid:true,element:el}}}try{jTAC._internal.pushContext("jqueryValidate.defaultShowErrors()");var elementsFound={};var options=this.settings;var svH=options.highlight;var svUH=options.unhighlight;try{options.highlight=captureH;options.unhighlight=captureU;origDefaultShowErrors.call(this)}finally{options.highlight=svH;options.unhighlight=svUH}if(svH||svUH||options.labelErrorClass||options.containerErrorClass){gatherElements(this,elementsFound);if(svH||svUH){hilightInputs(this,elementsFound)}hilightNearby(this,elementsFound)}}finally{jTAC._internal.popContext()}}var origDefaultShowErrors=$.validator.prototype.defaultShowErrors;$.validator.prototype.defaultShowErrors=defaultShowErrors;function gatherElements(validator,elementsFound){var rules=validator.settings.rules;$.each(rules,function(key,value){if(!key){return}$.each(value,function(childkey,paramcont){if(childkey=="messages"){return}var holder=paramcont.param||paramcont.params||paramcont;var cond=holder.Condition;if(!cond){return}var last=cond.getLastEvaluateResult();if((last==-1)||(last==null)){return}try{var conns=[];cond.collectConnections(conns);for(var j=0;j<conns.length;j++){var conn=conns[j];if(conn instanceof jTAC.Connections.BaseElement){var el=conn.getElement();if(!el||!el.id){continue}if((elementsFound[el.id]===undefined)||elementsFound[el.id].valid){elementsFound[el.id]={valid:last==1,element:el}}}}}catch(e){jTAC.warn("Exception occurred when checking elements for the "+key+"' rule. Exception: "+e.message,null,"jqueryValidate.gatherElements()")}})})}function hilightInputs(validator,elementsFound){var options=validator.settings;for(var propName in elementsFound){var r=elementsFound[propName];var fnc=r.valid?options.unhighlight:options.highlight;if(fnc){var ec=$(r.element).data("jtac-errorclass");if(ec==null){ec=options.inputErrorClass}var vc=$(r.element).data("jtac-validclass");if(vc==null){vc=options.inputValidClass}fnc.call(validator,r.element,ec,vc)}}}function hilightNearby(validator,elementsFound){var options=validator.settings;if(options.labelErrorClass===undefined){options.labelErrorClass="label-validation-error"}if(options.containerErrorClass===undefined){options.containerErrorClass="container-validation-error"}if(!options.labelErrorClass&&!options.containerErrorClass){return}if(!options.cssNearby){options.cssNearby=defaultCssNearby}var labels=$("Label");$.each(labels,function(key,value){var id=value.htmlFor;if(id&&elementsFound[id]&&!value.getAttribute("generated")){options.cssNearby.call(this,value,options.labelErrorClass,elementsFound[id].valid)}});var containers=$("[data-jtac-valinputs]");$.each(containers,function(key,value){var ids=$(value).data("jtac-valinputs");if(ids==null){return}if(ids==""){for(var propName in elementsFound){var r=elementsFound[propName];var p=r.element.parentNode;while(p&&(p.tagName!="FORM")){if(p==value){options.cssNearby.call(this,value,options.containerErrorClass,r.valid);break}p=p.parentNode}}}else{ids=ids.split("|");for(var i=0;i<ids.length;i++){var id=ids[i];if(id&&elementsFound[id]){options.cssNearby.call(this,value,options.containerErrorClass,elementsFound[id].valid)}}}})}function defaultCssNearby(elToUpdate,css,isValid){var elToUpdate=$(elToUpdate);var local=elToUpdate.data("jtac-errorclass");if(local){css=local}if(css==null){return}if(isValid){elToUpdate.removeClass(css)}else{elToUpdate.addClass(css)}}var publics={createCondition:createCondition,evaluate:evaluate,validate:validate,attachMultiConnections:attachMultiConnections,installUnobtrusive:installUnobtrusive,mergeOptions:mergeOptions,postInit:postInit};publics._internal={useConditionAsRule:useConditionAsRule};return publics}());jTAC._internal.temp._Connections_BaseJQUIElement={extend:"Connections.BaseElement","abstract":true,constructor:function(a){this.callParent([a])},getElement:function(){try{this._pushContext();if(this._internal.element!=null){return this._internal.element}var b=this.getId();if(!b){this._error("Did not assign the id.")}var a=$("#"+b);if(a){this._checkElement(a)}else{if(!a&&!this.getAllowNone()){this._error("HTML Element not found for "+b)}}return a}finally{this._popContext()}},setElement:function(a){if(typeof(a.jquery)!="string"){a=$(a)}this._internal.element=a},_checkElement:function(a){if(typeof(a.jquery)=="string"){return true}this._error("Element must be a jQuery instance.")},getTextValue:function(){var a=this.getElement();if(a){return this._cleanString(a.val())}return null},setTextValue:function(a){var b=this.getElement();if(b){b.val(a)}},addEventListener:function(b,c,d){var e=this.getElement();if(e){if(d){var a="data-jqueryconnection-"+d;if(e.data(a)!=null){return true}e.data(a,true)}e.bind(b.substr(2),c)}return false},getData:function(a){var b=this.getElement(true);if(b){return b.data(a)}return null},setData:function(a,c){var b=this.getElement(true);if(b){b.data(a,c)}},isVisible:function(){var a=this.getElement(true);if(!a){return true}return this._isDOMVisible(a.get(0))},isEnabled:function(){var a=this.getElement(true);if(!a){return true}return this._isDOMEnabled(a.get(0))},getLabel:function(){var a=this.getElement(true);if(a){a=a.get(0)}return this._locateLabel(a,this.getDefaultLabel())},getClass:function(){var a=this.getElement();if(a){return a.css()}return""},setClass:function(a){var b=this.getElement();if(b){b.css(a)}},addClass:function(a){var b=this.getElement();if(b){b.addClass(a)}},removeClass:function(a){var b=this.getElement();if(b){b.removeClass(a)}}};jTAC.define("Connections.BaseJQUIElement",jTAC._internal.temp._Connections_BaseJQUIElement);jTAC._internal.temp._Connections_JQUIDatePicker={extend:"Connections.BaseJQUIElement",constructor:function(a){this.callParent([a])},typeSupported:function(a){return a=="date"},getTypedValue:function(b){var g=this.getElement();if(g){if(b&&(b!="date")){this._error("The jquery element "+this.getId()+" does not support the type "+b,"getTypedValue")}var h=$.datepicker;var e=h._getInst(g[0]);var a=h._get(e,"dateFormat");var f=g.val();var c=h._getFormatConfig(e);try{return h.parseDate(a,f,c)}catch(d){h.log(d);throw d}}return null},setTypedValue:function(a){var b=this.getElement();if(b){if(a instanceof Date){b.datepicker("setDate",a)}else{this._error("The HTML element "+this.getId()+" does not support the type of the value","setTypedValue")}}},isNullValue:function(a){return this.getTextValue()==""},_checkElement:function(a){this.callParent([a]);if(!this.testElement(a)){this._error("Element must have a datepicker object.")}},testElement:function(b){if(window.$&&$.datepicker){var a=(typeof b=="string")?document.getElementById(b):b;if(a){if(a.jquery){a=a[0]}return $.data(a,"datepicker")!=null}}return false},_createTypeManager:function(b){if(!jTAC.isDefined("TypeManagers.Base")){this._error("Must load TypeManager scripts.")}var a=this.callParent();if(!a){return jTAC.create(this._defaultTypeManager)}return a},_defaultTypeManager:"TypeManagers.Date"};jTAC.define("Connections.JQUIDatePicker",jTAC._internal.temp._Connections_JQUIDatePicker);jTAC.connectionResolver.register("Connections.JQUIDatePicker");