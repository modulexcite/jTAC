(function(b){if(b.validator.replaceTokens){return}var a={formatAndAdd:function(e,g){var f=this.defaultMessage(e,g.method),d=/\$?\{(\d+)\}/g;if(typeof f==="function"){f=f.call(this,g.parameters,e)}var c=b.validator.replaceTokens[g.method];if(!c){c=b.validator.defaultTokenReplacer}f=c.call(b.validator,f,e,g.parameters,b(e).val());this.errorList.push({message:f,element:e});this.errorMap[e.name]=f;this.submitted[e.name]=f},defaultTokenReplacer:function(e,c,h,g){var d=/\$?\{(\d+)\}/g;if(d.test(e)){e=b.validator.format(e.replace(d,"{$1}"),h)}if(g==null){g=""}e=this.tokenReplacer(e,"VALUE",g.toString());var f=this.elementLabel(c)||"*** Add the data-msglabel attribute to id "+c.id+". ***";e=this.tokenReplacer(e,"LABEL",f);return e},tokenReplacer:function(f,d,c){var e=new RegExp("\\{"+d+"\\}","ig");return f.replace(e,c.toString())},minMaxReplacer:function(f,d,c,e){if(d!=null){f=this.tokenReplacer(f,"MIN",d)}if(c!=null){f=this.tokenReplacer(f,"MAX",c)}if(e!=null){f=this.tokenReplacer(f,"LENGTH",e);if(typeof d!=="number"){d=0}if(typeof c!=="number"){c=99999999}var g=Math.max(e-c,d-e);f=this.tokenReplacer(f,"DIFF",g)}return f},elementLabel:function(d){if(!d){return null}var c=d.getAttribute("data-msglabel");if(c==null){var e=b("label[for='"+d.id+"'][generated!='true']");if(e){c=e.html();if(c){c=c.replace(/\<(.|\n)+?\>/ig,"");c=c.replace(/[^\dA-Za-z]+$/,"");c=c.replace(/^[^\dA-Za-z]+/,"");d.setAttribute("data-msglabel",c)}}}return c},replaceTokens:{minlength:function(d,c,f,e){d=b.validator.minMaxReplacer(d,f,null,e.length);return b.validator.defaultTokenReplacer(d,c,f,e)},maxlength:function(d,c,f,e){d=b.validator.minMaxReplacer(d,null,f,e.length);return b.validator.defaultTokenReplacer(d,c,f,e)},rangelength:function(d,c,f,e){d=b.validator.minMaxReplacer(d,f[0],f[1],e.length);return b.validator.defaultTokenReplacer(d,c,f,e)},min:function(d,c,f,e){d=b.validator.minMaxReplacer(d,f,null,null);return b.validator.defaultTokenReplacer(d,c,f,e)},max:function(d,c,f,e){d=b.validator.minMaxReplacer(d,null,f,null);return b.validator.defaultTokenReplacer(d,c,f,e)},range:function(d,c,f,e){d=b.validator.minMaxReplacer(d,f[0],f[1],null);return b.validator.defaultTokenReplacer(d,c,f,e)}}};b.extend(b.validator.prototype,a);b.extend(b.validator,a)}(jQuery));if(!window.jTAC){throw new Error("window.jTAC not created.")}jTAC.require("Conditions.Base");jTAC_Temp={config:{depends:null,lookupKey:null},configrule:{lookupKey:jTAC.checkAsStrOrNull},replaceTokens:function(d,c){var b=d;switch(c.context){case"alert":b=jTAC.replaceAll(b,"{NEWLINE}","\n",true);case"tooltip":b=jTAC.replaceAll(b,"{NEWLINE}","\r",true);b=jTAC.replaceAll(b,"<(.|\n)+?>","");break;default:b=jTAC.replaceAll(b,"{NEWLINE}","<br />",true);break}if(jTAC.contains(b,"{ERRORLABEL}",true)){var a=c.messagelabel;b=jTAC.replaceAll(b,"{ERRORLABEL}",a!=null?a:"messagelabel")}return b},_replaceToken:function(c,b,a){if(jTAC.contains(c,b,true)){c=jTAC.replaceAll(c,b,a.toString(),true)}return c},_spReplaceToken:function(e,c,b){var d=new RegExp("\\{"+b+":([^:}]*):([^:}]*)\\}");var a=d.exec(e);if((a!=null)&&(a.length==3)){var f=new RegExp("{"+b+":"+a[1]+":"+a[2]+"}","gi");if(c==1){return e.replace(f,a[1])}else{return e.replace(f,a[2])}}return e},_tmReplaceToken:function(i,g,f,d){if(jTAC.contains(f)){var b=g;var c=this.getTypeManager();if(c){var a=jTAC.silentWarnings();jTAC.silentWarnings(true);try{try{if(typeof(b)=="string"){b=c.toValueNeutral(b)}b=c.toString(b);if(d.context=="html"){b=jTAC.htmlEncode(b)}}catch(h){b=g}}finally{jTAC.silentWarnings(a)}}i=jTAC.replaceAll(i,f,b,true)}return i},defaultErrorMessage:function(){return""},setDepends:function(a){if(typeof a=="function"){this.config.depends=a}else{if((typeof a=="string")&&(a.indexOf("{")!=0)){this.config.depends=a}else{this.config.depends=jTAC.checkAsConditionOrNull(a)}}},canEvaluate:function(){if(!this.getEnabled()){return false}if(this.getAutoDisable()&&!this._connsEditable()){return false}var b=this.getDepends();if(b){if(typeof b=="function"){var a=null;if(b.getConnection){a=b.getConnection().getElement()}return b.call(this,a)}else{if((typeof b=="object")&&b.canEvaluate()&&(b.evaluate()==0)){return false}}if(typeof b=="string"){return $(b).length>0}}return true},ruleName:function(){return this.$className.toLowerCase()}};jTAC.addMembers("Conditions.Base",jTAC_Temp);if(jTAC.isDefined("Conditions.BaseOneConnection")){jTAC_Temp={replaceTokens:function(d,b){var a=this.callParent([d,b]);var c=this.getConnection();a=this._tmReplaceToken(a,c.getTextValue(),"{VALUE}",b);if(jTAC.contains(a,"{LABEL}",true)){a=jTAC.replaceAll(a,"{LABEL}",c.getLabel()||"<strong>Warning: No label defined for "+c.getId()+". Use &lt;Label for=&gt; or data-msglabel='label' in the element.</strong>",true)}return a}};jTAC.addMembers("Conditions.BaseOneConnection",jTAC_Temp)}if(jTAC.isDefined("Conditions.BaseTwoConnections")){jTAC_Temp={replaceTokens:function(d,b){var a=this.callParent([d,b]);var c=this.getConnection2();a=this._tmReplaceToken(a,c.getTextValue(),"{VALUE2}",b);if(jTAC.contains(a,"{LABEL2}",true)){a=jTAC.replaceAll(a,"{LABEL2}",c.getLabel()||"<strong>Warning: No label defined for "+c.getId()+". Use &lt;Label for=&gt; or data-msglabel='label' in the element.</strong>",true)}return a}};jTAC.addMembers("Conditions.BaseTwoConnections",jTAC_Temp)}if(jTAC.isDefined("Conditions.DataTypeCheck")){jTAC_Temp={replaceTokens:function(d,c){var b=this.callParent([d,c]);if(jTAC.contains(b,"{DATATYPE}",true)){var a=this.getTypeManager().getFriendlyName();b=jTAC.replaceAll(b,"{DATATYPE}",a,true)}return b},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be a valid {DATATYPE}."}};jTAC.addMembers("Conditions.DataTypeCheck",jTAC_Temp)}if(jTAC.isDefined("Conditions.Range")){jTAC_Temp={ruleName:function(){return"advrange"},replaceTokens:function(c,b){var a=this.callParent([c,b]);a=this._tmReplaceToken(a,this.getMinimum(),"{MINIMUM}",b);a=this._tmReplaceToken(a,this.getMaximum(),"{MAXIMUM}",b);return a},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be between {MINIMUM} and {MAXIMUM}."}};jTAC.addMembers("Conditions.Range",jTAC_Temp)}if(jTAC.isDefined("Conditions.BaseOperator")){jTAC_Temp={replaceTokens:function(d,c){var b=this.callParent([d,c]);var a=this.getOperator();a=jTAC.translations.lookup(a,a);if(c.context=="html"){a=jTAC.htmlEncode(a)}b=jTAC.replaceAll(b,"{OPERATOR}",a,true);return b}};jTAC.addMembers("Conditions.BaseOperator",jTAC_Temp)}if(jTAC.isDefined("Conditions.CompareToValue")){jTAC_Temp={replaceTokens:function(c,b){var a=this.callParent([c,b]);a=this._tmReplaceToken(a,this.getValueToCompare(),"{VALUETOCOMPARE}",b);return a},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be {OPERATOR} {VALUETOCOMPARE}."}};jTAC.addMembers("Conditions.CompareToValue",jTAC_Temp)}if(jTAC.isDefined("Conditions.CompareTwoElements")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be {OPERATOR} <span class='{ERRORLABEL}'>{LABEL2}</span>."}};jTAC.addMembers("Conditions.CompareTwoElements",jTAC_Temp)}if(jTAC.isDefined("Conditions.Difference")){jTAC_Temp={replaceTokens:function(e,d){var c=this.callParent([e,d]);if(jTAC.contains(c,"{DIFFVALUE}",true)){var a=this.getDifferenceValue();if(typeof(a)!="string"){var b=jTAC.create("TypeManagers.Float");b.setTrailingZeroDecimalPlaces(0);b.setMaxDecimalPlaces(3);a=b.toString(a)}if(d.context=="html"){a=jTAC.htmlEncode(a)}c=jTAC.replaceAll(c,"{DIFFVALUE}",a,true)}return c},defaultErrorMessage:function(){return"Difference between <span class='{ERRORLABEL}'>{LABEL}</span> and <span class='{ERRORLABEL}'>{LABEL2}</span> must be {OPERATOR} {DIFFVALUE}."}};jTAC.addMembers("Conditions.Difference",jTAC_Temp)}if(jTAC.isDefined("Conditions.Required")){jTAC_Temp={ruleName:function(){return"advrequired"},replaceTokens:function(d,c){var b=this.callParent([d,c]);var a=this.count;if(a==null){a=0}b=jTAC.replaceAll(b,"{COUNT}",a.toString(),true);b=jTAC.replaceAll(b,"{MINIMUM}",this.getMinimum().toString(),true);return jTAC.replaceAll(b,"{MAXIMUM}",this.getMaximum().toString(),true)},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> requires an entry."}};jTAC.addMembers("Conditions.Required",jTAC_Temp)}if(jTAC.isDefined("Conditions.RequiredIndex")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> requires a selection."}};jTAC.addMembers("Conditions.RequiredIndex",jTAC_Temp)}if(jTAC.isDefined("Conditions.SelectedIndex")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> has an invalid selection. Choose another."}};jTAC.addMembers("Conditions.SelectedIndex",jTAC_Temp)}if(jTAC.isDefined("Conditions.BaseCounter")){jTAC_Temp={replaceTokens:function(g,f){var e=this.callParent([g,f]);var d=this.count;if(d==null){d=0}e=jTAC.replaceAll(e,"{COUNT}",d.toString(),true);e=this._spReplaceToken(e,d,"COUNT");var c=this.getMinimum();if(c==null){c=0}e=jTAC.replaceAll(e,"{MINIMUM}",c.toString(),true);var b=this.getMaximum();if(b==null){b=9999999}e=jTAC.replaceAll(e,"{MAXIMUM}",b.toString(),true);var a=Math.max(c-d,d-b);e=jTAC.replaceAll(e,"{DIFF}",a.toString(),true);e=this._spReplaceToken(e,a,"DIFF");return e}};jTAC.addMembers("Conditions.BaseCounter",jTAC_Temp)}if(jTAC.isDefined("Conditions.CharacterCount")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must have between {MINIMUM} and {MAXIMUM} characters."}};jTAC.addMembers("Conditions.CharacterCount",jTAC_Temp)}if(jTAC.isDefined("Conditions.WordCount")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must have between {MINIMUM} and {MAXIMUM} words."}};jTAC.addMembers("Conditions.WordCount",jTAC_Temp)}if(jTAC.isDefined("Conditions.CountSelections")){jTAC_Temp={defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must have between {MINIMUM} and {MAXIMUM} selections."}};jTAC.addMembers("Conditions.CountSelections",jTAC_Temp)}if(jTAC.isDefined("Conditions.RegExp")){jTAC_Temp={config:{patternLabel:"format",patternLookupKey:null},configrule:{patternLookupKey:jTAC.checkAsStrOrNull},replaceTokens:function(d,c){var b=this.callParent([d,c]);var a=jTAC.translations.lookup(this.getPatternLookupKey(),this.getPatternLabel());if(c.context=="html"){a=jTAC.htmlEncode(a)}return jTAC.replaceAll(b,"{PATTERN}",a,true)},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL}</span> must be a valid {PATTERN}."}};jTAC.addMembers("Conditions.RegExp",jTAC_Temp)}if(jTAC.isDefined("Conditions.DuplicateEntry")){jTAC_Temp={replaceTokens:function(d,c){var b=this.callParent([d,c]);if(jTAC.contains(b,"{LABEL",true)){var a="field 1";if(this._errconn1){a=this._errconn1.getLabel()}b=jTAC.replaceAll(b,"{LABEL1}",a,true);a="field 2";if(this._errconn2){a=this._errconn2.getLabel()}b=jTAC.replaceAll(b,"{LABEL2}",a,true)}return b},defaultErrorMessage:function(){return"<span class='{ERRORLABEL}'>{LABEL1}</span> must be different from <span class='{ERRORLABEL}'>{LABEL2}</span>."}};jTAC.addMembers("Conditions.DuplicateEntry",jTAC_Temp)}if(jTAC.isDefined("Conditions.BooleanLogic")){jTAC_Temp={defaultErrorMessage:function(){return"*** EXPLICITY ASSIGN THIS MESSAGE ***"}};jTAC.addMembers("Conditions.BooleanLogic",jTAC_Temp)}if(!window.jTAC){throw new Error("window.jTAC not created.")}if(!window.jQuery||!$.validator){jTAC.error("Must load jquery and jquery-validate script files first.")}if($.validator.replaceTokens===undefined){jTAC.error("Must load /jTAC/jquery-validate/ReplaceTokens PlugIn.js script file before Rules.js.")}jTAC.require(["Connections.FormElement","TypeManagers.Base","Conditions.Base"]);jTAC.jqueryValidate=(function(){var unobtrusive=$.validator?$.validator.unobtrusive:null;function createCondition(element,condname,param){try{jTAC._internal.pushContext("jqueryValidate.createCondition()",condname);delete param.Condition;var cond;if(typeof(param)=="function"){cond=param()}else{if(typeof(param)=="object"){cond=jTAC.create(condname,param)}else{if((param===true)||(param==null)){cond=jTAC.create(condname,null)}else{jTAC.error("Value for a condition function must be an object.")}}}if(element&&(cond.connection instanceof jTAC.Connections.BaseElement)){cond.connection=jTAC.connectionResolver.create(element,cond.connection)}return cond}finally{jTAC._internal.popContext()}}function evaluate(element,condname,params){try{jTAC._internal.pushContext("jqueryValidate.evaluate()",condname);if(params==null){jTAC.error("Params must be assigned.")}if(!condname&&params.jtacClass){condname=params.jtacClass}delete params.jtacClass;var cond=params.Condition;if(!cond){cond=createCondition(element,condname,params);params.Condition=cond}if(!cond.canEvaluate.call(cond)){return"dependency-mismatch"}var r=cond.evaluate.call(cond);if(r==-1){return"dependency-mismatch"}return !!r}finally{jTAC._internal.popContext()}}function validate(validator,id){try{jTAC._internal.pushContext("jqueryValidate.validate('"+id+"')");var el=$("#"+id);if(el.valid()){validator.defaultShowErrors()}}finally{jTAC._internal.popContext()}}function defaultOptions(){var orig=$.prototype.validate;$.prototype.validate=function(options){if(this.length&&options){if(options.messagelabel===undefined){options.messagelabel="message-label"}if(options.labelErrorClass===undefined){options.labelErrorClass="label-validation-error"}if(options.containerErrorClass===undefined){options.containerErrorClass="container-validation-error"}if(options.messageErrorClass===undefined){options.messageErrorClass="message-validation-error"}if(options.messageValidClass===undefined){options.messageValidClass="message-validation-valid"}if(options.inputErrorClass===undefined){options.inputErrorClass=options.errorClass?options.errorClass:"input-validation-error"}options.errorClass=options.messageErrorClass;if(options.inputValidClass===undefined){options.inputValidClass=options.validClass?options.validClass:"input-validation-valid"}options.validClass=options.messageValidClass;if(unobtrusive||(options.errorPlacement===undefined)){if(!unobtrusive&&options.errorPlacement&&!options.errorPlacementFallback){options.errorPlacementFallback=options.errorPlacement}options.errorPlacement=$.proxy(onError,this[0])}if(unobtrusive||(options.success===undefined)){if(!unobtrusive&&options.success&&!options.successFallback){options.successFallback=options.success}options.success=$.proxy(onSuccess,this[0])}}return orig.call(this,options)}}defaultOptions();function mergeOptions(formElement,newOptions){var funcProps=["submitHandler","invalidHandler","invalidHandlerFallback","showErrors","errorPlacement","errorPlacementFallback","success","successFallback","highlight","unhighlight","highlight1","unhighlight1"];var validator=$.data(formElement[0],"validator");var options;if(validator&&validator.settings){options=validator.settings}else{validator=formElement.validate({});options=validator.settings}var val=newOptions.success||newOptions.successFallback;if(val){if(window[val]===undefined){funcProps.splice(funcProps.indexOf("success"),1)}}for(var propName in newOptions){if(!propName){continue}var val=newOptions[propName];if((funcProps.indexOf(propName)>-1)&&(typeof val=="string")){options[propName]=window[val];if((options[propName]==null)&&window.console){jTAC.warn("Validator options include the property ["+propName+" = '"+val+"']. This value must match a globally declared function.",null,"jqueryValidate.MergeOptions")}}else{options[propName]=val}}return options}function attachMultiConnections(formselector){try{jTAC._internal.pushContext("jqueryValidate.attachMultiConnections()");var form=$(formselector);if(!form||!form.length){return}var validator=$.data(form[0],"validator");var rules=validator.settings.rules;$.each(rules,function(key,value){if(!key){return}var el=document.getElementById(key);if(!el){el=document.getElementsByName(key);if(!el||!el.length){return}el=el[0]}$.each(value,function(childkey,paramcont){if(childkey=="messages"){return}var condname=ruleNameMap[childkey];if(condname==null){return}var srcId=el.id;var func=function(e){validate(validator,srcId)};try{var cond=createCondition(el,condname,paramcont.param?paramcont.param:paramcont);if(paramcont.param){paramcont.param.Condition=cond}var conns=[];cond.collectConnections(conns);for(var j=0;j<conns.length;j++){if(conns[j] instanceof jTAC.Connections.BaseElement){if(j>0){conns[j].addEventListener("onchange",func,"qvc"+el.id)}conns[j].addSupportEventListeners("onchange",func,"qvc"+el.id)}}}catch(e){jTAC.warn("Exception occurred when checking element "+srcId+", check the '"+condname+"' method. Exception message: "+e.message)}})})}finally{jTAC._internal.popContext()}}function installUnobtrusive(){if(runInstall){return}runInstall=true;try{jTAC._internal.pushContext("jqueryValidate.installUnobtrusive()");var forms=$("form");$.each(forms,function(key,form){form=$(form);var newOptions=form.data("val-options");if(newOptions){try{if(typeof newOptions=="string"){newOptions=window.eval("("+newOptions+");")}mergeOptions(form,newOptions)}catch(e){jTAC.error("Could not parse the data-val-options attribute of form id ["+form.get()[0].id+"] Error info:"+e.toString())}}attachMultiConnections(form)})}finally{jTAC._internal.popContext()}}var runInstall=false;if(unobtrusive){var postInit=[];unobtrusive.nativeParse=unobtrusive.parse;unobtrusive.parse=function(selector){unobtrusive.nativeParse(selector);installUnobtrusive();for(var i=0;i<postInit.length;i++){postInit[i]()}}}function registerConditionsAsRules(){try{jTAC._internal.pushContext("jqueryValidate.registerConditionsAsRules()");var defs=jTAC._internal.definitions;for(var fullClassName in defs){var def=jTAC.getDefinition(fullClassName);if(def.inst instanceof jTAC.Conditions.Base){if(!def.inst.$abstract){useConditionAsRule(def.inst.ruleName(),fullClassName)}}}}finally{jTAC._internal.popContext()}}var defaultMessages={};var ruleNameMap=[];function useConditionAsRule(ruleName,fullClassName){ruleNameMap[ruleName]=fullClassName;var ruleFnc=function(value,element,params){return evaluate.call(this,element,fullClassName,params)};var emFnc=function(ruleparms,element){return retrieveErrorMessage(ruleName,ruleparms)};$.validator.addMethod(ruleName,ruleFnc,emFnc);if($.validator.replaceTokens){$.validator.replaceTokens[ruleName]=replaceTokens}if($.validator.unobtrusive){$.validator.unobtrusive.adapters.add(ruleName,["json"],function(options){try{var obj=options.params.json?eval("("+options.params.json+")"):{};options.rules[ruleName]={param:obj}}catch(e){jTAC.error("Syntax error in data-val-"+ruleName+"-json attribute of the HTML element "+options.element.id+". Error reported: "+e+" Attribute value: "+options.params.json.toString())}if(options.message){options.messages[ruleName]=options.message}})}}function retrieveErrorMessage(ruleName,param){var cond=param.Condition;var defmsg=defaultMessages[ruleName];if(!defmsg){defmsg=defaultMessages[ruleName]=jTAC.translations.lookup(ruleName+"EM",cond.defaultErrorMessage())}if(cond&&cond.getLookupKey){var key=cond.getLookupKey();if(key){defmsg=jTAC.translations.lookup(key,defmsg)}}return defmsg}function replaceTokens(message,element,param,value){try{var cond=param.Condition;if(cond&&cond.replaceTokens){var validator=$.data(element.form,"validator");message=cond.replaceTokens.call(cond,message,{element:element,value:value,validator:validator,context:"html",messagelabel:validator.settings.messagelabel})}}catch(e){jTAC.warn('Exception occurred replacing tokens in message "'+message+'" of element '+(element?element.id:"[unknown]")+" Exception: "+e.message,null,"jqueryValidate.replaceTokens()")}return message}registerConditionsAsRules();function onError(error,inputElement){var validator=$.data(this,"validator");var options=validator.settings;var name=inputElement[0].name||inputElement[0].id;var container=$(this).find("[data-valmsg-for='"+name+"']");if(!container||!container.length){error.removeClass(options.messageValidClass).addClass(options.messageErrorClass);if(options.errorPlacementFallback){options.errorPlacementFallback.call(validator,error,inputElement)}else{error.insertAfter(inputElement)}return}container.removeClass("field-validation-valid").addClass("field-validation-error");error.data("unobtrusiveContainer",container);var ec=$(container).data("jtac-errorclass");if(ec==null){ec=options.messageErrorClass}var vc=$(container).data("jtac-validclass");if(vc==null){vc=options.messageValidClass}error.removeClass(vc).addClass(ec);var replace=$.parseJSON(container.attr("data-valmsg-replace"))!==false;if(replace){container.empty();error.appendTo(container)}else{error.hide()}}function onSuccess(error){var validator=$.data(this,"validator");var options=validator.settings;var container=error.data("unobtrusiveContainer");if(!container||!container.length){error.removeClass(options.messageErrorClass).addClass(options.messageValidClass);var fb=options.successFallback;if(fb!=null){if(typeof fb=="string"){label.addClass(fb)}else{fb.call(validator,error)}}return}if(container){var ec=$(container).data("jtac-errorclass");if(ec==null){ec=options.messageErrorClass}var vc=$(container).data("jtac-validclass");if(vc==null){vc=options.messageValidClass}container.removeClass("field-validation-error").addClass("field-validation-valid");error.removeData("unobtrusiveContainer");error.removeClass(ec).addClass(vc);var replace=$.parseJSON(container.attr("data-valmsg-replace"));if(replace){container.empty()}}}function defaultShowErrors(){function captureH(el,ec,vc){if(!el||!el.id){return}if(elementsFound[el.id]==undefined){elementsFound[el.id]={valid:false,element:el}}}function captureU(el,ec,vc){if(!el||!el.id){return}if((elementsFound[el.id]==undefined)||elementsFound[el.id]){elementsFound[el.id]={valid:true,element:el}}}try{jTAC._internal.pushContext("jqueryValidate.defaultShowErrors()");var elementsFound={};var options=this.settings;var svH=options.highlight;var svUH=options.unhighlight;try{options.highlight=captureH;options.unhighlight=captureU;origDefaultShowErrors.call(this)}finally{options.highlight=svH;options.unhighlight=svUH}if(svH||svUH||options.labelErrorClass||options.containerErrorClass){gatherElements(this,elementsFound);if(svH||svUH){hilightInputs(this,elementsFound)}hilightNearby(this,elementsFound)}}finally{jTAC._internal.popContext()}}var origDefaultShowErrors=$.validator.prototype.defaultShowErrors;$.validator.prototype.defaultShowErrors=defaultShowErrors;function gatherElements(validator,elementsFound){var rules=validator.settings.rules;$.each(rules,function(key,value){if(!key){return}$.each(value,function(childkey,paramcont){if(childkey=="messages"){return}var holder=paramcont.param||paramcont.params||paramcont;var cond=holder.Condition;if(!cond){return}var last=cond.getLastEvaluateResult();if((last==-1)||(last==null)){return}try{var conns=[];cond.collectConnections(conns);for(var j=0;j<conns.length;j++){var conn=conns[j];if(conn instanceof jTAC.Connections.BaseElement){var el=conn.getElement();if(!el||!el.id){continue}if((elementsFound[el.id]===undefined)||elementsFound[el.id].valid){elementsFound[el.id]={valid:last==1,element:el}}}}}catch(e){jTAC.warn("Exception occurred when checking elements for the "+key+"' rule. Exception: "+e.message,null,"jqueryValidate.gatherElements()")}})})}function hilightInputs(validator,elementsFound){var options=validator.settings;for(var propName in elementsFound){var r=elementsFound[propName];var fnc=r.valid?options.unhighlight:options.highlight;if(fnc){var ec=$(r.element).data("jtac-errorclass");if(ec==null){ec=options.inputErrorClass}var vc=$(r.element).data("jtac-validclass");if(vc==null){vc=options.inputValidClass}fnc.call(validator,r.element,ec,vc)}}}function hilightNearby(validator,elementsFound){var options=validator.settings;if(options.labelErrorClass===undefined){options.labelErrorClass="label-validation-error"}if(options.containerErrorClass===undefined){options.containerErrorClass="container-validation-error"}if(!options.labelErrorClass&&!options.containerErrorClass){return}if(!options.cssNearby){options.cssNearby=defaultCssNearby}var labels=$("Label");$.each(labels,function(key,value){var id=value.htmlFor;if(id&&elementsFound[id]&&!value.getAttribute("generated")){options.cssNearby.call(this,value,options.labelErrorClass,elementsFound[id].valid)}});var containers=$("[data-jtac-valinputs]");$.each(containers,function(key,value){var ids=$(value).data("jtac-valinputs");if(ids==null){return}if(ids==""){for(var propName in elementsFound){var r=elementsFound[propName];var p=r.element.parentNode;while(p&&(p.tagName!="FORM")){if(p==value){options.cssNearby.call(this,value,options.containerErrorClass,r.valid);break}p=p.parentNode}}}else{ids=ids.split("|");for(var i=0;i<ids.length;i++){var id=ids[i];if(id&&elementsFound[id]){options.cssNearby.call(this,value,options.containerErrorClass,elementsFound[id].valid)}}}})}function defaultCssNearby(elToUpdate,css,isValid){var elToUpdate=$(elToUpdate);var local=elToUpdate.data("jtac-errorclass");if(local){css=local}if(css==null){return}if(isValid){elToUpdate.removeClass(css)}else{elToUpdate.addClass(css)}}var publics={createCondition:createCondition,evaluate:evaluate,validate:validate,attachMultiConnections:attachMultiConnections,installUnobtrusive:installUnobtrusive,mergeOptions:mergeOptions,postInit:postInit};publics._internal={useConditionAsRule:useConditionAsRule};return publics}());jTAC._internal.temp._Connections_BaseJQUIElement={extend:"Connections.BaseElement","abstract":true,constructor:function(a){this.callParent([a])},getElement:function(){try{this._pushContext();if(this._internal.element!=null){return this._internal.element}var b=this.getId();if(!b){this._error("Did not assign the id.")}var a=$("#"+b);if(a){this._checkElement(a)}else{if(!a&&!this.getAllowNone()){this._error("HTML Element not found for "+b)}}return a}finally{this._popContext()}},setElement:function(a){if(typeof(a.jquery)!="string"){a=$(a)}this._internal.element=a},_checkElement:function(a){if(typeof(a.jquery)=="string"){return true}this._error("Element must be a jQuery instance.")},getTextValue:function(){var a=this.getElement();if(a){return this._cleanString(a.val())}return null},setTextValue:function(a){var b=this.getElement();if(b){b.val(a)}},addEventListener:function(b,c,d){var e=this.getElement();if(e){if(d){var a="data-jqueryconnection-"+d;if(e.data(a)!=null){return true}e.data(a,true)}e.bind(b.substr(2),c)}return false},getData:function(a){var b=this.getElement(true);if(b){return b.data(a)}return null},setData:function(a,c){var b=this.getElement(true);if(b){b.data(a,c)}},isVisible:function(){var a=this.getElement(true);if(!a){return true}return this._isDOMVisible(a.get(0))},isEnabled:function(){var a=this.getElement(true);if(!a){return true}return this._isDOMEnabled(a.get(0))},getLabel:function(){var a=this.getElement(true);if(a){a=a.get(0)}return this._locateLabel(a,this.getDefaultLabel())},getClass:function(){var a=this.getElement();if(a){return a.css()}return""},setClass:function(a){var b=this.getElement();if(b){b.css(a)}},addClass:function(a){var b=this.getElement();if(b){b.addClass(a)}},removeClass:function(a){var b=this.getElement();if(b){b.removeClass(a)}}};jTAC.define("Connections.BaseJQUIElement",jTAC._internal.temp._Connections_BaseJQUIElement);jTAC._internal.temp._Connections_JQUIDatePicker={extend:"Connections.BaseJQUIElement",constructor:function(a){this.callParent([a])},typeSupported:function(a){return a=="date"},getTypedValue:function(b){var g=this.getElement();if(g){if(b&&(b!="date")){this._error("The jquery element "+this.getId()+" does not support the type "+b,"getTypedValue")}var h=$.datepicker;var e=h._getInst(g[0]);var a=h._get(e,"dateFormat");var f=g.val();var c=h._getFormatConfig(e);try{return h.parseDate(a,f,c)}catch(d){h.log(d);throw d}}return null},setTypedValue:function(a){var b=this.getElement();if(b){if(a instanceof Date){b.datepicker("setDate",a)}else{this._error("The HTML element "+this.getId()+" does not support the type of the value","setTypedValue")}}},isNullValue:function(a){return this.getTextValue()==""},_checkElement:function(a){this.callParent([a]);if(!this.testElement(a)){this._error("Element must have a datepicker object.")}},testElement:function(b){if(window.$&&$.datepicker){var a=(typeof b=="string")?document.getElementById(b):b;if(a){if(a.jquery){a=a[0]}return $.data(a,"datepicker")!=null}}return false},_createTypeManager:function(b){if(!jTAC.isDefined("TypeManagers.Base")){this._error("Must load TypeManager scripts.")}var a=this.callParent();if(!a){return jTAC.create(this._defaultTypeManager)}return a},_defaultTypeManager:"TypeManagers.Date"};jTAC.define("Connections.JQUIDatePicker",jTAC._internal.temp._Connections_JQUIDatePicker);jTAC.connectionResolver.register("Connections.JQUIDatePicker");