jTAC._internal.temp._Connections_FormElement={extend:"Connections.BaseElement",constructor:function(a){this.callParent([a])},config:{fixLength:true,buttons:null},getTextValue:function(){var a=this.getElement();if(a){return this._cleanString(this._getValueAttribute(a))}return null},setTextValue:function(b){var a=this.getElement();if(a){if(this._isCheckable(a)){a.checked=!!b}else{a.value=b}}},typeSupported:function(b){var c=this.getElement();if(c){if(c.tagName=="INPUT"){var a=c.valueAsDate!==undefined;var d=c.valueAsNumber!==undefined;switch(c.type){case"radio":return b=="boolean"||b=="index";case"checkbox":if(b=="boolean"){return true}else{if((b=="index")||(b=="indices")){return this.getButtons()!=null}else{return false}}case"date":case"month":return a&&(b=="date");case"datetime":case"datetime-local":return a&&((b=="date")||(b=="datetime")||(b=="time"));case"time":return a&&(b=="time");case"number":return d&&((b=="integer")||(b=="float"));case"range":return d&&(b=="integer")}}else{if(c.tagName=="SELECT"){return(b=="index")||(b=="indices")}}}return false},getTypedValue:function(d){var f=this.getElement();if(f){if(f.tagName=="INPUT"){switch(f.type){case"radio":case"checkbox":if(!d||(d=="boolean")){return f.checked}else{if(d=="index"){var g=this._createButtonsList(f);if(g){for(var e=0;e<g.length;e++){if(g[e].checked){return e}}return -1}}else{if((d=="indices")&&(f.type=="checkbox")){var g=this._createButtonsList(f);var c=new Array();if(g){for(var e=0;e<g.length;e++){if(g[e].checked){c.push(e)}}return c}}}}break;case"date":case"datetime":case"datetime-local":case"month":case"time":if(!d||(d=="date")){if(f.valueAsDate!==undefined){return f.valueAsDate}}break;case"number":case"range":if(!d||(d=="integer")||(d=="float")){if(f.valueAsNumber!==undefined){return !isNaN(f.valueAsNumber)?f.valueAsNumber:null}}break}}else{if(f.tagName=="SELECT"){if(!d||(d=="index")){return f.selectedIndex}else{if(d=="indices"){var b=new Array();for(var e=0;e<f.options.length;e++){if(f.options[e].selected){b.push(e)}}return b}}}}this._error("The HTML element "+this.getId()+" does not support the type "+d,"getTypedValue")}return null},setTypedValue:function(d){var b=this.getElement();if(b){if(b.tagName=="INPUT"){switch(b.type){case"radio":case"checkbox":if(typeof(d)=="boolean"){b.checked=d;return}else{if(typeof(d)=="number"){var c=this._createButtonsList(b);if(c){for(var a=0;a<c.length;a++){c[a].checked=a==d}return}}else{if((d instanceof Array)&&(b.type=="checkbox")){var c=this._createButtonsList(b);if(c){for(var a=0;a<c.length;a++){c[a].checked=d.indexOf(a)>-1}return}}}}break;case"date":case"datetime":case"datetime-local":case"month":case"time":if(d==null){b.value="";return}else{if(d instanceof Date){if(b.valueAsDate!==undefined){b.valueAsDate=d;return}}}break;case"number":case"range":if(d==null){b.value="";return}else{if(typeof(d)=="number"){if(b.valueAsNumber!==undefined){b.valueAsNumber=d;return}}}break}}else{if(b.tagName=="SELECT"){if(typeof(d)=="number"){b.selectedIndex=d;return}else{if(d instanceof Array){for(var a=0;a<b.options.length;a++){b.options[a].selected=d.indexOf(a)!=-1}return}}}}this._error("The HTML element "+this.getId()+" does not support the type of the value","setTypedValue")}},isNullValue:function(a){var b=this.getElement();if(b){if(!a&&this._isCheckable(b)){return false}return this._cleanString(this._getValueAttribute(b))==""}return true},textLength:function(){var e=this.getTextValue();if(!e){return 0}var b=e.length;if(this.getFixLength()){var d=this.getElement(true);if(d&&(d.tagName=="TEXTAREA")){var a;var c=this._internal.findEnterRE;if(!c){this._internal.findEnterRE=c=/([^\r](?=\n))|(\r$)|(^\n)/g}while((a=c.exec(e))!=null){b++}}}return b},_checkElement:function(a){if(a.value===undefined){this._error("HTML Element does not have a value attribute.")}},addEventListener:function(a,b,c){return this._addEvt(this.getElement(),a,b,c)},_addEvt:function(c,b,d,e){if(c){if(e){var a="data-formconnection-"+e;if(c.getAttribute(a)!=null){return true}c.setAttribute(a,true)}if((b=="onchange")&&this._isCheckable(c)){b="onclick"}if(c.addEventListener){c.addEventListener(b.substr(2),d,false);return true}else{if(c.attachEvent){c.attachEvent(b,d);return true}}}return false},addSupportEventListeners:function(a,e,f){var c=this.getElement(true);if(!c){return}var d=this._createButtonsList(c);if(d){for(var b=0;b<d.length;b++){if(c!=d[b]){this._addEvt(d[b],a,e,f)}}}},_createButtonsList:function(e){var c=this.getButtons();if(c){if(typeof(c)=="function"){c=c(e)}if(c instanceof Array){var a=[];for(var d=0;d<c.length;d++){if(typeof(c[d])=="string"){var f=document.getElementById(c[d]);if(f){a.push(f)}else{if(window.console){console.log("'"+c[d]+"' element not found on page. Check spelling and case. Specified in a Connections.FormElement using element id '"+e.id+"'.")}}}else{if(typeof(c[d])=="object"){a.push(c[d])}}}return a.length?a:null}}else{if(e.type=="radio"){c=document.getElementsByName(e.name);return c.length?c:null}}return null},testElement:function(b){if(typeof(b)=="string"){var a=document.getElementById(b);return a&&(a.form!=null)}else{return((typeof(b)=="object")&&(b.tagName!==undefined)&&(b.form!=null))}},_getValueAttribute:function(a){if(this._isCheckable(a)){if(!a.checked){return""}return a.value?a.value:"on"}return a.value},_isCheckable:function(a){return(a.tagName=="INPUT")&&/^(checkbox)|(radio)$/.test(a.type)},isVisible:function(){var d=this.getElement(true);if(!d){return true}var a=this._createButtonsList(d);if(a){for(var c=0;c<a.length;c++){if(this._isDOMVisible(a[c])){return true}}return false}else{return this._isDOMVisible(d)}},isEnabled:function(){var d=this.getElement(true);if(!d){return true}var a=this._createButtonsList(d);if(a){for(var c=0;c<a.length;c++){if(this._isDOMEnabled(a[c])){return true}}return false}else{return this._isDOMEnabled(d)}},_createTypeManager:function(b){var a=this.callParent([b]);if(a){return a}switch(b.type){case"checkbox":case"radio":return jTAC.createByClassName("TypeManagers.Boolean",null,true);break;case"date":return jTAC.createByClassName("TypeManagers.Date",null,true);break;case"datetime":case"datetime-local":return jTAC.createByClassName("TypeManagers.DateTime",null,true);break;case"month":return jTAC.createByClassName("TypeManagers.MonthYear",null,true);case"time":return jTAC.createByClassName("TypeManagers.TimeOfDay",null,true);break;case"number":return jTAC.createByClassName("TypeManagers.Float",null,true);break;case"range":return jTAC.createByClassName("TypeManagers.Integer",null,true);break}return null},setButtons:function(a){if(typeof(a)=="string"){a=window[a]}if((typeof(a)=="function")||(a instanceof Array)){this.config.buttons=a}else{this._error("Illegal value. See function's documentation.")}}};jTAC.define("Connections.FormElement",jTAC._internal.temp._Connections_FormElement);jTAC.defineAlias("FormElement","Connections.FormElement");jTAC.connectionResolver={_regCls:new Array(),_regFns:new Array(),_formElement:jTAC.create("Connections.FormElement"),register:function(a){try{jTAC._internal.pushContext("connectionResolver.register");for(var b=0;b<arguments.length;b++){var c=arguments[b];if(typeof(c)=="function"){this._regFns.push(c);continue}if(typeof c=="string"){c=jTAC.create(c,null,true)}if(c&&c.testElementAndCreate){this._regCls.push(c)}else{jTAC.error("Could not register an item.")}}}finally{jTAC._internal.popContext()}},create:function(f,a){try{jTAC._internal.pushContext("resolveConnection");var e=null;var d=typeof f=="string"?document.getElementById(f):f;if(d&&d.getAttribute){var b=d.getAttribute("data-jtac-connection");if(b){e=jTAC.create(b,null,true);if(e){if(!(e instanceof jTAC.Connections.Base)){jTAC.error("Unknown name in data-jtac-connection attribute of ["+d.id+"].",null,null,true);e=null}}}}if(!e){for(var c=0;c<this._regFns.length;c++){e=_regFns[c](f);if(e){break}}}if(!e){for(var c=0;c<this._regCls.length;c++){e=this._regCls[c].testElementAndCreate(f);if(e){break}}}if(a){if(e){e.allowNone=a.allowNone}else{if(a.testElement(f)){e=a}}}if(!e&&this._formElement.testElement(f)){e=jTAC.create("Connections.FormElement")}if(e){(typeof(f)=="string")?e.setId(f):e.setElement(f)}return e}finally{jTAC._internal.popContext()}}};